<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo Blox Builder 5.9.6"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" media=print onload='this.media="all"'><link rel=stylesheet href=../../../css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css integrity crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=../../../css/wowchemy.2f9263fc44a928b033d7ab8a9897bd56.css><link rel=stylesheet href=../../../css/libs/chroma/github-dark.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=../../../css/libs/chroma/github-dark.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=description content="How to develop an end-user application using the Card Resource Service."><link rel=alternate hreflang=en-us href=https://keyple.org/learn/user-guide/card-resource-service/><link rel=canonical href=https://keyple.org/learn/user-guide/card-resource-service/><link rel=manifest href=../../../manifest.webmanifest><link rel=icon type=image/png href=../../../media/icon_hu16db34b3636b127457de39ca2fab620f_9845_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=../../../media/icon_hu16db34b3636b127457de39ca2fab620f_9845_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#1D87BB"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://keyple.org/media/logo.svg"><meta property="og:type" content="article"><meta property="og:site_name" content="Eclipse Keyple"><meta property="og:url" content="https://keyple.org/learn/user-guide/card-resource-service/"><meta property="og:title" content="Card Resource Service User Guide | Eclipse Keyple"><meta property="og:description" content="How to develop an end-user application using the Card Resource Service."><meta property="og:image" content="https://keyple.org/media/logo.svg"><meta property="og:locale" content="en-us"><meta property="article:modified_time" content="2024-11-27T10:20:12+01:00"><title>Card Resource Service User Guide | Eclipse Keyple</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=90cca05980b207aa4a4b326e816d455c><script src=../../../js/wowchemy-init.min.d66af272089c6c0601f1a57edc3bf6ab.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class="page-header header--fixed"><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=../../../><img src=../../../media/logo.svg alt="Eclipse Keyple"></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=../../../><img src=../../../media/logo.svg alt="Eclipse Keyple"></a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>What is Eclipse Keyple®</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=../../../what-is-keyple/overview/><span>Overview</span></a>
<a class=dropdown-item href=../../../what-is-keyple/why-trust/><span>Why trust Eclipse Keyple®?</span></a>
<a class=dropdown-item href=../../../what-is-keyple/who-is-it-for/><span>Who is it for?</span></a>
<a class=dropdown-item href=../../../#adopters><span>Who is using Eclipse Keyple®?</span></a>
<a class=dropdown-item href=../../../what-is-keyple/what-is-calypso/><span>What is Calypso®?</span></a>
<a class=dropdown-item href=../../../what-is-keyple/main-features/><span>Keyple's main features</span></a>
<a class=dropdown-item href=../../../#news><span>News</span></a></div></li><li class=nav-item><a class=nav-link href=../../../learn/overview><span>Learn</span></a></li><li class=nav-item><a class=nav-link href=../../../components/overview><span>Components</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Community</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=../../../adopters-and-testimonials/><span>Adopters & Testimonials</span></a>
<a class=dropdown-item href=../../../community/contributing/><span>Contributing</span></a>
<a class=dropdown-item href=../../../community/roadmap/><span>Roadmap</span></a>
<a class=dropdown-item href=../../../community/changelog/><span>Changelog</span></a>
<a class=dropdown-item href=../../../project-dashboard/><span>Project dashboard</span></a>
<a class=dropdown-item href=../../../statistics/><span>Statistics</span></a>
<a class=dropdown-item href="https://sonarcloud.io/organizations/eclipse/projects?search=keyple&amp;sort=-analysis_date"><span>Code quality dashboard</span></a>
<a class=dropdown-item href=https://projects.eclipse.org/projects/iot.keyple/><span>Eclipse Foundation Keyple page</span></a>
<a class=dropdown-item href=https://accounts.eclipse.org/mailing-list/keyple-dev/><span>Mailing list</span></a>
<a class=dropdown-item href=https://github.com/eclipse-keyple/><span>GitHub home repository</span></a>
<a class=dropdown-item href=https://docs.keyple.org/><span>All APIs docs</span></a></div></li><li class=nav-item><a class=nav-link href=../../../external-resources/><span>External resources</span></a></li><li class=nav-item><a class=nav-link href=../../../learn/build-your-first-app/><button class='btn btn-info'><i class='fas fa-rocket pr-1' aria-hidden=true></i> <span>START CODING</span></button></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav></header></div><div class=page-body><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">User guides
</span><span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>Search...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li><a href=../../../learn/></a></li><div class=docs-toc-item><a class=docs-toc-link href=../../../learn/overview/>Overview</a><ul class="nav docs-sidenav"><li><a href=../../../learn/overview/key-concepts/>Key concepts</a></li><li><a href=../../../learn/overview/architecture/>Architecture</a></li><li><a href=../../../learn/overview/keypop-api/>Keypop API</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../learn/build-your-first-app/>Build your first app</a><ul class="nav docs-sidenav"><li><a href=../../../learn/build-your-first-app/java-app/>Java</a></li><li><a href=../../../learn/build-your-first-app/android-app/>Android</a></li><li><a href=../../../learn/build-your-first-app/cpp-app/>C++</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../learn/user-guide/>User guides</a><ul class="nav docs-sidenav"><li><a href=../../../learn/user-guide/standalone-application/>Standalone application</a></li><li><a href=../../../learn/user-guide/distributed-application/>Distributed application</a></li><li><a href=../../../learn/user-guide/server-json-api/>Server JSON API for non-Keyple clients</a></li><li><a href=../../../learn/user-guide/calypso-application/>Calypso application</a></li><li class=active><a href=../../../learn/user-guide/card-resource-service/>Card resource service</a></li><li><a href=../../../learn/user-guide/migration-guide/>How to upgrade Keyple</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../learn/developer-guide/>Developer guides</a><ul class="nav docs-sidenav"><li><a href=../../../learn/developer-guide/reader-plugin-add-on/>Reader plugin add-on</a></li><li><a href=../../../learn/developer-guide/card-extension-add-on/>Card extension add-on</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../learn/code-samples/>Code samples</a><ul class="nav docs-sidenav"><li><a href=../../../learn/code-samples/java-example/>Java examples</a></li><li><a href=../../../learn/code-samples/cpp-example/>C++ examples</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../learn/keyple-in-depth/>Keyple in depth</a><ul class="nav docs-sidenav"><li><a href=../../../learn/keyple-in-depth/core-services/>Core services</a></li><li><a href=../../../learn/keyple-in-depth/calypso-card-extension/>Calypso card extension</a></li><li><a href=../../../learn/keyple-in-depth/build-and-ci/>Build and CI</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../learn/archives/>Archives</a></div></ul></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#features>Features</a></li><li><a href=#operating-mode>Operating mode</a></li><li><a href=#access-to-the-service>Access to the service</a></li><li><a href=#configure-the-service>Configure the service</a><ul><li><a href=#access-to-the-configurator>Access to the configurator</a></li><li><a href=#register-plugins>Register plugins</a></li><li><a href=#register-pool-plugins>Register pool plugins</a></li><li><a href=#define-profiles>Define profiles</a></li><li><a href=#set-allocation-mode>Set allocation mode</a></li><li><a href=#apply-the-configuration>Apply the configuration</a></li></ul></li><li><a href=#use-the-service>Use the service</a><ul><li><a href=#start-the-service>Start the service</a></li><li><a href=#allocate-a-resource>Allocate a resource</a></li><li><a href=#release-a-resource>Release a resource</a></li><li><a href=#delete-a-resource>Delete a resource</a></li><li><a href=#stop-the-service>Stop the service</a></li></ul></li><li><a href=#api>API</a></li><li><a href=#example>Example</a></li><li><a href=#download>Download</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><div class=docs-article-container></div><div class=docs-article-container><h1>Card Resource Service User Guide</h1><article class=article-style><br><h2 id=overview>Overview</h2><p>An application that performs secure transactions on smart cards may need to dynamically allocate a card resource
dedicated to the current transaction to manage the security of the transaction (e.g. SAM or HSM).</p><p>To meet this need, Keyple proposes the Service Resource component which provides a service that supports dynamic card
resource allocation, using a profile-based filtering mechanism.</p><br><h2 id=features>Features</h2><ul><li>card resource locking during use;</li><li>automatic monitoring of observable plugins and readers;</li><li>customizable profile-based filtering mechanism (specific plugins list, reader name using regular expression, reader
group name for pool plugins, specific card selection);</li><li>specific reader configuration capability;</li><li>allocation priority management;</li><li>two allocation modes (blocking, non-blocking);</li><li>multiple allocation strategies (first available card resource, cyclic, random);</li><li>configurable allocation timeout;</li><li>failure management.</li></ul><br><h2 id=operating-mode>Operating mode</h2><ol><li><a href=#access-to-the-service>Access to the service</a></li><li><a href=#access-to-the-configurator>Access to the configurator</a></li><li>Register <a href=#register-plugins>plugins</a> and/or <a href=#register-pool-plugins>pool plugins</a> to be used</li><li><a href=#define-profiles>Define profiles</a> for card resource filtering</li><li><a href=#set-allocation-mode>Set the allocation mode</a> (optional)</li><li><a href=#apply-the-configuration>Apply the configuration</a></li><li><a href=#start-the-service>Start the service</a></li><li><a href=#allocate-a-resource>Allocate a resource</a></li><li>Use the resource</li><li><a href=#release-a-resource>Release the used resource</a></li></ol><br><h2 id=access-to-the-service>Access to the service</h2><p>Invoke the <code>CardResourceServiceProvider.getService()</code> static method to access the service.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>CardResourceService</span><span class=w> </span><span class=n>cardResourceService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>CardResourceServiceProvider</span><span class=p>.</span><span class=na>getService</span><span class=p>();</span></span></span></code></pre></div></div></div><br><h2 id=configure-the-service>Configure the service</h2><h3 id=access-to-the-configurator>Access to the configurator</h3><p>Invoke the <code>getConfigurator()</code> method on the service to get a new instance of the service configurator.
It is built on the fluent pattern, and it guides you through the various steps to be specified during the configuration
process.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>cardResourceService</span><span class=p>.</span><span class=na>getConfigurator</span><span class=p>()...</span></span></span></code></pre></div></div></div><h3 id=register-plugins>Register plugins</h3><p>If you plan to use plugins of type <code>Plugin</code> or <code>ObservablePlugin</code> in the card resource service, you must specify the
global ordered list of plugins to be used when searching for a card resource.</p><p>This is the default list that will be applied for profiles that have not explicitly specified another list.</p><p>Please note that the order in which plugins are added is important.</p><p>To add one or more plugins, you need to create a new instance of the <code>PluginsConfigurator</code> class and provide it to the
configurator using the <code>withPlugins(...)</code> method.</p><p>It is possible to configure the following:</p><ul><li>specify the global allocation strategy to all added plugins;</li><li>specify the global usage timeout of a resource;</li><li>activate independently plugin by plugin the monitoring of the plugin and/or its readers in order to allow the service
to automatically update the list of resources. In this case you will have to provide a handler to be informed in case
of error or crash of the observation thread.</li></ul><p>For each plugin added, you will need to provide an implementation of the <code>ReaderConfiguratorSpi</code> interface to
automatically configure new readers or those already connected.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=p>.</span><span class=na>withPlugins</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>PluginsConfigurator</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>withAllocationStrategy</span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>withUsageTimeout</span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>addPluginWithMonitoring</span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>addPlugin</span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>addPluginWithMonitoring</span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>())</span></span></span></code></pre></div></div></div><h3 id=register-pool-plugins>Register pool plugins</h3><p>If you plan to use plugins of type <code>PoolPlugin</code> in the card resource service, you must specify the global ordered list
of pool plugins to be used when searching for a card resource.</p><p>This is the default list that will be applied for profiles that have not explicitly specified another list.</p><p>Please note that the order in which plugins are added is important.
If you use both plugins and pool plugins in your configuration, it is possible to specify if pool plugins should be
taken into account first or not during the resource allocation process.</p><p>To add one or more pool plugins, you need to create a new instance of the <code>PoolPluginsConfigurator</code> class and provide it
to the configurator using the <code>withPoolPlugins(...)</code> method.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=p>.</span><span class=na>withPoolPlugins</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>PoolPluginsConfigurator</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>usePoolFirst</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>addPoolPlugin</span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>addPoolPlugin</span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>())</span></span></span></code></pre></div></div></div><h3 id=define-profiles>Define profiles</h3><p>A profile defines a set of filters which will be used when enumerating the available resources. The profile identifiers
will be used when allocating a resource.</p><p>To add profiles, you must create a new instance of the <code>CardResourceProfileConfigurator</code> class for each profile and
provide them to the configurator using the <code>withCardResourceProfiles(...)</code> method.</p><p>It is possible to configure the following:</p><ul><li>override the global plugin list to use;</li><li>set reader name filter using a regex value;</li><li>set reader group reference filter in case of pool plugins.</li></ul><p>You also need to provide an implementation of the <code>CardResourceProfileExtension</code> interface in order to be able to
customize the filtering if needed and to return to the service an implementation of the <code>SmartCard</code> interface when a
compatible card is found.
The <code>SmartCard</code> found will be returned to the user by the allocation process.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=p>.</span><span class=na>withCardResourceProfiles</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>CardResourceProfileConfigurator</span><span class=p>.</span><span class=na>builder</span><span class=p>(</span><span class=n>RESOURCE_A</span><span class=p>,</span><span class=w> </span><span class=n>yourCardResourceProfileExtensionA</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>withReaderNameRegex</span><span class=p>(</span><span class=n>READER_NAME_REGEX_A</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>(),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>CardResourceProfileConfigurator</span><span class=p>.</span><span class=na>builder</span><span class=p>(</span><span class=n>RESOURCE_B</span><span class=p>,</span><span class=w> </span><span class=n>yourCardResourceProfileExtensionB</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>withReaderNameRegex</span><span class=p>(</span><span class=n>READER_NAME_REGEX_B</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>(),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>CardResourceProfileConfigurator</span><span class=p>.</span><span class=na>builder</span><span class=p>(</span><span class=n>RESOURCE_C</span><span class=p>,</span><span class=w> </span><span class=n>yourCardResourceProfileExtensionC</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>withReaderGroupReference</span><span class=p>(</span><span class=n>READER_GROUP_REFERENCE_C</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>())</span></span></span></code></pre></div></div></div><h3 id=set-allocation-mode>Set allocation mode</h3><p>By default, the card resource service is configured with a <strong>non-blocking</strong> allocation mode.
This means that if no resources are available at the time of the request for an allocation, then the service returns the
hand directly.</p><p>The <code>withBlockingAllocationMode(...)</code> method configure the service to perform allocations in <strong>blocking</strong> mode so that
it only hands over when a resource becomes available.</p><p>You will then have to specify the duration between two search cycles and the maximum waiting time so that the service
can always return after a certain time if it has still not found anything.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=p>.</span><span class=na>withBlockingAllocationMode</span><span class=p>(</span><span class=n>100</span><span class=p>,</span><span class=w> </span><span class=n>10000</span><span class=p>)</span><span class=w> </span><span class=o>//</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=na>g</span><span class=p>.</span><span class=w> </span><span class=n>search</span><span class=w> </span><span class=n>each</span><span class=w> </span><span class=n>100</span><span class=w> </span><span class=n>ms</span><span class=w> </span><span class=n>during</span><span class=w> </span><span class=n>10</span><span class=w> </span><span class=n>seconds</span><span class=w> </span><span class=n>maximum</span></span></span></code></pre></div></div></div><h3 id=apply-the-configuration>Apply the configuration</h3><p>Invoke the <code>configure()</code> method on the configurator to finalise and apply the configuration.</p><p>Once finalized, the new configuration replaces the previous one but does not change the state of the service.
If the service was already started at that moment, then it stops, applies the new configuration, and restarts.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=p>.</span><span class=na>configure</span><span class=p>();</span></span></span></code></pre></div></div></div><br><h2 id=use-the-service>Use the service</h2><h3 id=start-the-service>Start the service</h3><p>Invoke the <code>start()</code> method on the service to start the service using the current configuration.
The service will initialize the list of available resources for each profile and start the monitoring processes if
requested.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>cardResourceService</span><span class=p>.</span><span class=na>start</span><span class=p>();</span></span></span></code></pre></div></div></div><h3 id=allocate-a-resource>Allocate a resource</h3><p>Invoke the <code>getCardResource(...)</code> method on the service to retrieve and lock a card resource.
You just have to specify the name of the profile to use.</p><p>If the allocation mode is blocking, then the method will wait a while for a resource to become available.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>CardResource</span><span class=w> </span><span class=n>cardResource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cardResourceService</span><span class=p>.</span><span class=na>getCardResource</span><span class=p>(</span><span class=n>RESOURCE_A</span><span class=p>);</span></span></span></code></pre></div></div></div><h3 id=release-a-resource>Release a resource</h3><p>Invoke the <code>releaseCardResource(...)</code> method on the service to unlock a card resource.
You just have to provide the card resource to release.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>cardResourceService</span><span class=p>.</span><span class=na>releaseCardResource</span><span class=p>(</span><span class=n>cardResource</span><span class=p>);</span></span></span></code></pre></div></div></div><h3 id=delete-a-resource>Delete a resource</h3><p>Invoke the <code>removeCardResource(...)</code> method on the service to remove a card resource from the available card resource
list.
This can be useful in some cases if the card or reader has failed.
You just have to provide the card resource to remove.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>cardResourceService</span><span class=p>.</span><span class=na>removeCardResource</span><span class=p>(</span><span class=n>cardResource</span><span class=p>);</span></span></span></code></pre></div></div></div><h3 id=stop-the-service>Stop the service</h3><p>Invoke the <code>stop()</code> method on the service to stop the service if needed. Any monitoring is then stopped and no more
resources are accessible.</p><div class="code relative"><div class="code-copy-content nt3"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>cardResourceService</span><span class=p>.</span><span class=na>stop</span><span class=p>();</span></span></span></code></pre></div></div></div><br><h2 id=api>API</h2><ul><li><a href=https://docs.keyple.org/keyple-service-resource-java-lib target=_blank rel=noopener>API documentation & class diagram</a></li></ul><br><h2 id=example>Example</h2><ul><li><a href=https://github.com/eclipse-keyple/keyple-java-example target=_blank rel=noopener>Java example</a></li></ul><br><h2 id=download>Download</h2><ul><li><a href=https://keyple.org/components/overview/configuration-wizard/>Java components</a></li></ul></article><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Previous</div><a href=../../../learn/user-guide/calypso-application/ rel=next>Calypso Application User Guide</a></div><div class=post-nav-item><div class=meta-nav>Next</div><a href=../../../learn/user-guide/migration-guide/ rel=prev>Upgrade from an earlier version of Keyple</a></div></div></div></div><div class=body-footer><p>Last updated on 2024-11-27</p></div><footer class=site-footer><div class=container><div class="row featurette"><div class="col-12 col-sm-4"><p style=color:#fff><b>ECLIPSE LEGAL</b></p><a href=https://www.eclipse.org/legal/privacy.php>Privacy Policy</a><br><a href=https://www.eclipse.org/legal/termsofuse.php>Terms of Use</a><br><a href=https://www.eclipse.org/legal/copyright.php>Copyright Agent</a><br><a href=https://www.eclipse.org/legal/epl-2.0/>Eclipse Public License</a><br><a href=https://www.eclipse.org/legal/>Legal Resources</a><br><a href=https://eclipse.org/security/ target=_blank>Report a Vulnerability</a><br></div><div class="col-12 col-sm-4"><a href=https://www.eclipse.org target=_blank><img src=../../../media/eclipse_foundation_logo.svg id=logo-eclipse-foundation></a></div><div class="col-12 col-sm-4"><a href=https://iot.eclipse.org target=_blank><img src=../../../media/eclipse_iot_logo.svg id=logo-eclipse-iot></a></div></div></div><p class="powered-by copyright-license-text">© 2019-2025 The Eclipse Keyple® project. All Rights Reserved.</p><p class=powered-by id=template-info>Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target=_blank rel=noopener>Hugo Blox Builder</a> — the free, <a href=https://github.com/HugoBlox/hugo-blox-builder target=_blank rel=noopener>open source</a> website builder that empowers creators.</p></footer></main></div></div></div><div class=page-footer></div><script src=../../../js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js></script><script src=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js integrity crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js integrity="sha256-aQmOEF2ZD4NM/xt4hthzREIo/2PFkOX/g01WjxEV7Ys=" crossorigin=anonymous></script><script>anchors.add()</script><script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script><script id=page-data type=application/json>{"use_headroom":false}</script><script src=../../../en/js/wowchemy.min.452865b1d834bc61c53be56b7f191e42.js></script><script src=../../../js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js type=module></script><link rel=stylesheet href=https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css><script src=https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js></script><script src=https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js></script><script src=https://d3js.org/d3.v6.min.js></script></body></html>