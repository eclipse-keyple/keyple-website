<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.8.0"><meta name=description content="How to migrate from Keyple Java 0.8.1 to 0.9.0"><link rel=alternate hreflang=en-us href=https://keyple.org/docs/developer-guide/migration-0.8.1-to-0.9.0/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#1D87BB"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/darcula.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/darcula.min.css crossorigin=anonymous title=hl-dark disabled><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=%7CWork+Sans:ital,wght@0,300;1,500&display=swap"><link rel=stylesheet href=../../../css/academic.css><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5WLCZXC');</script><link rel=manifest href=../../../index.webmanifest><link rel=icon type=image/png href=../../../images/icon_hu16db34b3636b127457de39ca2fab620f_9845_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=../../../images/icon_hu16db34b3636b127457de39ca2fab620f_9845_192x192_fill_lanczos_center_2.png><link rel=canonical href=https://keyple.org/docs/developer-guide/migration-0.8.1-to-0.9.0/><meta property="twitter:card" content="summary"><meta property="og:site_name" content="Eclipse Keyple"><meta property="og:url" content="https://keyple.org/docs/developer-guide/migration-0.8.1-to-0.9.0/"><meta property="og:title" content="Migration Guide - Keyple Java 0.8.1 to 0.9.0 | Eclipse Keyple"><meta property="og:description" content="How to migrate from Keyple Java 0.8.1 to 0.9.0"><meta property="og:image" content="https://keyple.org/images/logo_hu673a59176cd62c570f44ed2728665b48_42188_300x300_fit_lanczos_2.png"><meta property="twitter:image" content="https://keyple.org/images/logo_hu673a59176cd62c570f44ed2728665b48_42188_300x300_fit_lanczos_2.png"><meta property="og:locale" content="en-us"><meta property="article:modified_time" content="2020-12-18T16:41:40+01:00"><script src=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#1D87BB","text":"#FFFFFF"},"button":{"background":"#FFFFFF","text":"#1D87BB"}},"theme":"classic","type":"opt-in","content":{"header":'Cookiessss used on the website!',"message":"Some Eclipse Foundation pages use cookies to better serve you when you return to the site. You can set your browser to notify you before you receive a cookie or turn off cookies. If you do so, however, some areas of some sites may not function properly. To read Eclipse Foundation Privacy Policy ","allow":"Allow cookies","deny":"Decline","dismiss":"Got it!","link":"click here","href":'https://www.eclipse.org/legal/privacy.php'},})});</script><title>Migration Guide - Keyple Java 0.8.1 to 0.9.0 | Eclipse Keyple</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><script>const isSiteThemeDark=false;</script><script src=../../../js/load-theme.js></script><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=../../../><img src=../../../images/logo_hu673a59176cd62c570f44ed2728665b48_42188_0x70_resize_lanczos_2.png alt="Eclipse Keyple"></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=../../../><img src=../../../images/logo_hu673a59176cd62c570f44ed2728665b48_42188_0x70_resize_lanczos_2.png alt="Eclipse Keyple"></a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>What is Eclipse Keyple™</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=../../../what-is-keyple/overview/><span>Overview</span></a>
<a class=dropdown-item href=../../../what-is-keyple/why-trust/><span>Why trust Eclipse Keyple™?</span></a>
<a class=dropdown-item href=../../../what-is-keyple/who-is-it-for/><span>Who is it for?</span></a>
<a class=dropdown-item href=../../../what-is-keyple/what-is-calypso/><span>What is Calypso®?</span></a>
<a class=dropdown-item href=../../../what-is-keyple/main-features/><span>Keyple's main features</span></a></div></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Components</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=../../../components-java/><span>Java</span></a>
<a class=dropdown-item href=../../../components-cpp/><span>C++</span></a></div></li><li class=nav-item><a class=nav-link href=../../../#news><span>News</span></a></li><li class=nav-item><a class="nav-link active" href=../../../docs/><span>Documentation</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Support & Trainings</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=../../../support-trainings/add-support-trainings/><span>Add your support & trainings</span></a>
<a class=dropdown-item href=../../../support-trainings/cna/><span>Calypso Networks Association</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-3" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation">
<span><i class="fas fa-bars"></i></span></button>
<input name=q type=search class=form-control placeholder=Search... autocomplete=off></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li><a href=../../../docs/>Overview</a></li><div class=docs-toc-item><a class=docs-toc-link href=../../../docs/build-your-first-app/><i class="fas fa-rocket pr-1"></i>Build your first app</a><ul class="nav docs-sidenav"><li><a href=../../../docs/build-your-first-app/java-app/>Java</a></li><li><a href=../../../docs/build-your-first-app/android-app/>Android</a></li><li><a href=../../../docs/build-your-first-app/cpp-app/>C++</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../docs/developer-guide/><i class="fas fa-chalkboard-teacher pr-1"></i>Developer guides</a><ul class="nav docs-sidenav"><li><a href=../../../docs/developer-guide/common-concepts/>Common concepts</a></li><li><a href=../../../docs/developer-guide/standalone-application/>Standalone application</a></li><li><a href=../../../docs/developer-guide/distributed-application/>Distributed application</a></li><li><a href=../../../docs/developer-guide/calypso-application/>Calypso application</a></li><li><a href=../../../docs/developer-guide/create-plugin/>Create a plugin</a></li><li><a href=../../../docs/developer-guide/create-extension/>Create an extension</a></li><li class=active><a href=../../../docs/developer-guide/migration-0.8.1-to-0.9.0/>Keyple Java 0.8.1 to 0.9.0</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../docs/api-reference/><i class="fas fa-plug pr-1"></i>API reference</a><ul class="nav docs-sidenav"><li><a href=../../../docs/api-reference/java-api/>Java</a></li><li><a href=../../../docs/api-reference/cpp-api/>C++</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../docs/architecture/><i class="fas fa-sitemap pr-1"></i>Architecture</a><ul class="nav docs-sidenav"><li><a href=../../../docs/architecture/keyple-global/>Keyple Global Solution</a></li><li><a href=../../../docs/architecture/keyple-core/>Keyple Core</a></li><li><a href=../../../docs/architecture/keyple-calypso/>Keyple Calypso</a></li></ul></div></ul></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#plugin-registration-in-the-seproxyservice>Plugin registration in the SeProxyService</a></li><li><a href=#preparation-of-selection-cases>Preparation of selection cases</a></li><li><a href=#retrieving-selection-results>Retrieving selection results</a></li><li><a href=#definition-of-the-security-settings-of-the-transaction>Definition of the security settings of the transaction</a></li><li><a href=#creation-of-the-potransaction-object>Creation of the PoTransaction object</a></li><li><a href=#transaction-commands-preparation>Transaction commands preparation</a></li><li><a href=#transaction-commands-processing>Transaction commands processing</a></li><li><a href=#retrieving-data-read-from-pos>Retrieving data read from POs</a><ul><li></li></ul></li><li><a href=#error-handling>Error handling</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><article class=article><div class=docs-article-container><h1>Migration Guide - Keyple Java 0.8.1 to 0.9.0</h1><div class=article-style><hr><p>This guide is intended to help a user of version 0.8.1 of Keyple Java to upgrade his application to the 0.9.0 version of the library.</p><p>From a user API point of view, the changes relate to the following topics:</p><ul><li><a href=#plugin-registration-in-the-seproxyservice>plugin registration in the SeProxyService</a></li><li><a href=#preparation-of-selection-cases>preparation of selection cases</a></li><li><a href=#retrieving-selection-results>retrieving selection results</a></li><li><a href=#definition-of-the-security-settings-of-the-transaction>definition of the security settings of the transaction</a></li><li><a href=#creation-of-the-potransaction-object>creation of the PoTransaction object</a></li><li><a href=#transaction-commands-preparation>transaction commands preparation</a></li><li><a href=#transaction-commands-processing>transaction commands processing</a></li><li><a href=#retrieving-data-read-from-pos>retrieving data read from POs</a></li><li><a href=#error-handling>error handling</a></li></ul><hr><h2 id=plugin-registration-in-the-seproxyservice>Plugin registration in the SeProxyService</h2><p>The <code>registerPlugin</code> method of the <code>SeProxyService</code> class now returns the reference of the registered plugin.</p><p>This makes it possible, for example, to perform a reader setup in an application such as this one:</p><pre><code class=language-java>   // Create a PcscPlugin and register it into the SeProxyService
   ReaderPlugin pcscPlugin = seProxyService.registerPlugin(new PcscPluginFactory());`

   // Get the PO reader from the plugin
   SeReader poReader = pcscPlugin.getReader(&quot;ASK LoGO 0&quot;);
</code></pre><hr><h2 id=preparation-of-selection-cases>Preparation of selection cases</h2><p>The <code>AidSelector</code>, <code>Selector</code> and <code>PoSelector</code> classes now follow the Fluent Builder pattern for better handling of optional parameters.</p><p>The construction of an <code>AidSelector</code> is as follows:</p><pre><code class=language-java>AidSelector appAidSelector = AidSelector.builder()
                            .aidToSelect(AID)
                            .fileControlInformation(AidSelector.FileControlInformation.FCI)
                            .fileOccurrence(AidSelector.FileOccurrence.FIRST)
                            .build();
</code></pre><p>The <code>fileControlInformation</code> and <code>fileOccurrence</code> fields are optional (shown here with their default values), so a simple version can be :</p><pre><code class=language-java>AidSelector aidSelector = AidSelector.builder().aidToSelect(CalypsoClassicInfo.AID).build();
</code></pre><p>The construction of a <code>SeSelector</code> is as follows:</p><pre><code class=language-java>seSelector = SeSelector.builder()
                .seProtocol(SeCommonProtocols.PROTOCOL_ISO14443_4)
                .aidSelector(appAidSelector)
                .build();
</code></pre><p>The <code>PoSelector</code> adds the possibility to specify that an invalidated PO should be processed</p><pre><code class=language-java>seSelector = SeSelector.builder()
                .seProtocol(SeCommonProtocols.PROTOCOL_ISO14443_4)
                .aidSelector(appAidSelector)
                .invalidatedPo(InvalidatedPo.ACCEPT)
                .build();
</code></pre><p>The management of PO commands to be performed after the selection step (when it has been successful) is handled by the methods of the <code>PoSelectionRequest</code> class:</p><ul><li>preparing to read files has been simplified and is done using the unique following method:</li></ul><pre><code class=language-java>public void prepareReadRecordFile(byte sfi, int recordNumber)
</code></pre><ul><li>preparing to select files is done using the following method:</li></ul><pre><code class=language-java>public void prepareSelectFile(byte[] lid)
public void prepareSelectFile(short lid)
</code></pre><p>Note that from now the &ldquo;prepare&rdquo; methods no longer return indexes, the data will be placed in the CalypsoPo object.</p><hr><h2 id=retrieving-selection-results>Retrieving selection results</h2><p>The <code>MatchingSelection</code> class no longer exists.
In the class <code>SelectionsResult</code> (see <code>processDefaultSelection/processExplicitSelection</code>):</p><ul><li><p><code>getActiveSelection</code> is replaced by <code>getActiveMatchingSe</code> which returns an <code>AbstractMatchingSe</code> object (the still existing <code>hasActiveSelection</code> method must be used before)</p></li><li><p><code>getMatchingSelection</code> is replaced by <code>getMatchingSe</code> which returns an <code>AbstractMatchingSe</code> object (may be null if the index provided does not correspond to a successful selection case)</p></li><li><p><code>getMatchingSelections</code> now returns a Map containing a list of associated <code>AbstractMatchingSe</code> with the selection index that produced it (<code>Map&lt;Integer, AbstractMatchingSe></code>)</p></li><li><p>a new <code>hasSelectionMatched</code> method indicates whether the selection index provided corresponds to a successful selection case</p></li><li><p>a new <code>getActiveSelectionIndex</code> method returns the index of the active selection (the still existing <code>hasActiveSelection</code> method must be used before)</p></li></ul><hr><h2 id=definition-of-the-security-settings-of-the-transaction>Definition of the security settings of the transaction</h2><p>These parameters are defined via the <code>PoSecuritySettings</code> class, whose construction now follows the Fluent Builder pattern.</p><p>All parameters are optional except the <code>SamResource</code>.</p><p>Here is an example of a complete <code>PoSecuritySettings</code> build:</p><pre><code class=language-java>poSecuritySettings = new PoSecuritySettings.PoSecuritySettingsBuilder(samResource)
                            .sessionDefaultKif(AccessLevel.SESSION_LVL_PERSO, DEFAULT_KIF_PERSO)
                            .sessionDefaultKif(AccessLevel.SESSION_LVL_LOAD, DEFAULT_KIF_LOAD)
                            .sessionDefaultKif(AccessLevel.SESSION_LVL_DEBIT, DEFAULT_KIF_DEBIT)
                            .sessionDefaultKeyRecordNumber(AccessLevel.SESSION_LVL_PERSO, DEFAULT_KEY_RECORD_NUMBER_PERSO)
                            .sessionDefaultKeyRecordNumber(AccessLevel.SESSION_LVL_LOAD, DEFAULT_KEY_RECORD_NUMBER_LOAD)
                            .sessionDefaultKeyRecordNumber(AccessLevel.SESSION_LVL_DEBIT, DEFAULT_KEY_RECORD_NUMBER_DEBIT)
                            .sessionModificationMode(ModificationMode.ATOMIC)
                            .ratificationMode(RatificationMode.CLOSE_RATIFIED)
                            .sessionAuthorizedKvcList(authKvcs)
                            .build();
</code></pre><hr><h2 id=creation-of-the-potransaction-object>Creation of the PoTransaction object</h2><p>Since PoSecuritySettings now integrates SamResource, the construction of PoTransaction has evolved slightly.</p><p>Here is an example:</p><pre><code class=language-java>PoTransaction poTransaction = new PoTransaction(new PoResource(poReader, calypsoPo), poSecuritySettings);
</code></pre><hr><h2 id=transaction-commands-preparation>Transaction commands preparation</h2><p>Just as with the &ldquo;prepare&rdquo; commands used for selection, the &ldquo;prepare&rdquo; commands used for transactions no longer return indexes.</p><p>The available commands in version 0.9 are:</p><pre><code class=language-java>public final void prepareSelectFile(SelectFileControl control)
public final void prepareSelectFile(short lid)
public final void prepareSelectFile(byte[] lid)
public final void prepareReadRecordFile(byte sfi, int recordNumber)
public final void prepareReadRecordFile(byte sfi, int firstRecordNumber, int numberOfRecords, int recordSize))
public final void prepareReadCounterFile(byte sfi, int countersNumber)
public final void prepareUpdateRecord(byte sfi, int recordNumber, byte[] recordData)
public final void prepareWriteRecord(byte sfi, int recordNumber, byte[] recordData)
public final void prepareAppendRecord(byte sfi, byte[] recordData)
public final void prepareIncreaseCounter(byte sfi, int counterNumber, int incValue)
public final void prepareDecreaseCounter(byte sfi, int counterNumber, int decValue)
</code></pre><hr><h2 id=transaction-commands-processing>Transaction commands processing</h2><p>The &ldquo;process&rdquo; commands have also been revised and simplified.</p><p>They all return <code>void</code>.</p><p>In case of failure a exception is raised (see below).</p><pre><code class=language-java>public final void processOpening(PoTransaction.SessionSetting.AccessLevel accessLevel)
</code></pre><p>The <code>ModificationMode</code> is no longer required since it is integrated in the <code>PoSecuritySettings</code>.</p><p>Parameters previously used to specify that a file is read at login are removed.</p><p>Instead, the first prepareReadFile command will be automatically taken into account.</p><pre><code class=language-java>public final void processPoCommands()
public final void processPoCommandsInSession()
public final void processCancel(ChannelControl channelControl)
public final void processClosing(ChannelControl channelControl)
</code></pre><hr><h2 id=retrieving-data-read-from-pos>Retrieving data read from POs</h2><p>This is a major evolution of the Keyple API. Previously, data read from Calyspo POs were retrieved by applications using &ldquo;parser&rdquo; methods.</p><p>With Keyple API 0.9, Calypso PO data is made available in the CalypsoPo object obtained during selection and enriched all along the operations performed with PoTransaction.</p><p>The public getter methods of CalypsoPo are:</p><pre><code class=language-java>public final String getDfName()
public final byte[] getDfNameBytes()
public final String getApplicationSerialNumber()
public final byte[] getApplicationSerialNumberBytes()

public final String getAtr()
public final String getStartupInfo()
public final PoRevision getRevision()
public final byte getSessionModification()
public final byte getApplicationType()
public final byte getApplicationSubtype()
public final byte getPlatform()
public final byte getSoftwareIssuer()
public final byte getSoftwareVersion()
public final byte getSoftwareRevision()

public final boolean isDeselectRatificationSupported()
public final boolean isConfidentialSessionModeSupported()
public final boolean isPublicAuthenticationSupported()
public final boolean isPinFeatureAvailable()
public final boolean isSvFeatureAvailable()

public final boolean isDfInvalidated()
public final boolean isDfRatified()

public final DirectoryHeader getDirectoryHeader()
public final ElementaryFile getFileBySfi(byte sfi)
public final ElementaryFile getFileByLid(short lid)
public final Map&lt;Byte, ElementaryFile&gt; getAllFiles()
</code></pre><p>Four new classes <code>DirectoryHeader</code>, <code>ElementaryFile</code>, <code>FileHeader</code> and <code>FileData</code> have been added.</p><h5 id=directoryheader>DirectoryHeader</h5><p>The public getters for this class are:</p><pre><code class=language-java>public short getLid()
public byte[] getAccessConditions()
public byte[] getKeyIndexes()

public byte getDfStatus()
public byte getKif(AccessLevel level)
public byte getKvc(AccessLevel level)

public String toString()
</code></pre><h5 id=elementaryfile>ElementaryFile</h5><p>The public getters for this class are:</p><pre><code class=language-java>public byte getSfi()
public FileHeader getHeader()
public FileData getData()

public String toString()
</code></pre><h5 id=fileheader>FileHeader</h5><p>The public getters for this class are:</p><pre><code class=language-java>public short getLid()
public int getRecordsNumber()
public int getRecordSize()
public FileType getType()
public byte getDfStatus()

public boolean isShared()
public Short getSharedReference()
public byte[] getAccessConditions()
public byte[] getKeyIndexes()

public String toString()
</code></pre><h5 id=filedata>FileData</h5><p>The public getters for this class are:</p><pre><code class=language-java>public byte[] getContent()
public byte[] getContent(int numRecord)
public byte[] getContent(int numRecord, int dataOffset, int dataLength)
public SortedMap&lt;Integer, byte[]&gt; getAllRecordsContent()

public int getContentAsCounterValue(int numCounter)
public SortedMap&lt;Integer, Integer&gt; getAllCountersValue()

public String toString()
</code></pre><p>So, for example to extract the contents of contract files present in the PO, the code might look like this:</p><pre><code class=language-java>[...]
    /* Read all 4 contracts command, record size set to 29 */
    poTransaction.prepareReadRecordFile(CalypsoClassicInfo.SFI_Contracts,
            CalypsoClassicInfo.RECORD_NUMBER_1, 4, 29);
    /* proceed with the sending of commands, don't close the channel */
    poTransaction.processPoCommandsInSession();

    ElementaryFile efContracts = calypsoPo.getFileBySfi(CalypsoClassicInfo.SFI_Contracts);

    SortedMap&lt;Integer, byte[]&gt; records = efContracts.getData().getAllRecordsContent();
    for (Map.Entry&lt;Integer, byte[]&gt; entry : records.entrySet()) {
        logger.info(&quot;Contract #{}: {}&quot;, entry.getKey(),
                ByteArrayUtil.toHex(entry.getValue()));
    }
[...]
</code></pre><hr><h2 id=error-handling>Error handling</h2><p>Since version 0.9, all Keyple exceptions are of the RuntimeException type.</p><p>Catching exceptions is therefore now optional.</p><p>However, it is possible to selectively catch certain exceptions in order to deal with particular cases.</p><p>The new hierarchy of Keyple exceptions is shown
<a href="https://keyple.atlassian.net/projects/KEYP/issues/KEYP-154?filter=allissues&orderby=priority%20DESC&keyword=exceptions" target=_blank rel=noopener>here</a></p></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Previous</div><a href=../../../docs/developer-guide/create-extension/ rel=next>Create an extension</a></div></div></div></div><div class=body-footer><p>Last updated on Fri, Dec 18, 2020</p></div></article><footer class=site-footer><div class=container><div class="row featurette"><div class="col-12 col-sm-4"><h4>More</h4><ul><li><a href=https://github.com/eclipse/keyple title="View Source Code on GitHub"><i class="fab fa-github"></i>GitHub Repository</a></li><li><a href=https://accounts.eclipse.org/mailing-list/keyple-dev title="Keyple information and discussions"><i class="fas fa-envelope"></i>Mailing list</a></li><li><a href=https://projects.eclipse.org/projects/iot.keyple title=https://projects.eclipse.org/projects/iot.keyple><i class="fas fa-globe"></i>Keyple's project page</a></li></ul></div><div class="col-12 col-sm-4"><h4>Eclipse Foundation</h4><ul><li><a href=https://www.eclipse.org/org/>About Eclipse Foundation</a></li><li><a href=https://www.eclipse.org/org/foundation/contact.php>Contact Eclipse Foundation</a></li><li><a href=https://www.eclipse.org/donate>Donate</a></li><li><a href=https://www.eclipse.org/membership>Members</a></li><li><a href=https://www.eclipse.org/org/documents/>Governance</a></li><li><a href=https://www.eclipse.org/org/documents/Community_Code_of_Conduct.php>Code of Conduct</a></li><li><a href=https://www.eclipse.org/artwork/>Logo and Artwork</a></li><li><a href=https://www.eclipse.org/org/foundation/directors.php></a></li></ul></div><div class="col-12 col-sm-4"><h4>Legal</h4><ul><li><a href=https://www.eclipse.org/legal/privacy.php>Privacy Policy</a></li><li><a href=https://www.eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li><a href=https://www.eclipse.org/legal/copyright.php>Copyright Agent</a></li><li><a href=https://www.eclipse.org/legal/epl-2.0/>Eclipse Public License</a></li><li><a href=https://www.eclipse.org/legal/>Legal Resources</a></li><li><a href=https://eclipse.org/security/ target=_blank>Report a Vulnerability</a></li></ul></section></div></div><p class=powered-by>Copyright © Eclipse Foundation, Inc. All Rights Reserved.</p><p class=powered-by>Powered by the
<a href=https://wowchemy.com/ target=_blank rel=noopener>Wowchemy theme</a>
for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></main></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js integrity="sha512-7t8APmYpzEsZP7CYoA7RfMPV9Bb+PJHa9x2WiUnDXZx3XHveuyWUtvNOexhkierl5flZ3tr92dP1mMS+SGlD+A==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/java.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/cpp.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/gradle.min.js></script><script>const code_highlighting=true;</script><script>const search_config={"indexURI":"/index.json","minLength":1,"threshold":0.3};const i18n={"no_results":"No results found","placeholder":"Search...","results":"results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks",'slides':"Slides"};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin=anonymous></script><script>anchors.add();</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=../../../js/academic.min.685aa588f098e3a2bb14612211c3de9e.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>