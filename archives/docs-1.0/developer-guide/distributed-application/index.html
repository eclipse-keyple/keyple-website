<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo Blox Builder 5.9.6"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" media=print onload='this.media="all"'><link rel=stylesheet href=../../../../css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css integrity crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=../../../../css/wowchemy.713ccde6907aaca544a91a92d40694c3.css><link rel=stylesheet href=../../../../css/libs/chroma/github-dark.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=../../../../css/libs/chroma/github-dark.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=robots content="noindex"><meta name=description content="How to develop an end-user application using network communications."><link rel=alternate hreflang=en-us href=https://keyple.org/archives/docs-1.0/developer-guide/distributed-application/><link rel=canonical href=https://keyple.org/archives/docs-1.0/developer-guide/distributed-application/><link rel=manifest href=../../../../manifest.webmanifest><link rel=icon type=image/png href=../../../../media/icon_hu16db34b3636b127457de39ca2fab620f_9845_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=../../../../media/icon_hu16db34b3636b127457de39ca2fab620f_9845_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#1D87BB"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://keyple.org/media/logo.svg"><meta property="og:type" content="article"><meta property="og:site_name" content="Eclipse Keyple"><meta property="og:url" content="https://keyple.org/archives/docs-1.0/developer-guide/distributed-application/"><meta property="og:title" content="Distributed application | Eclipse Keyple"><meta property="og:description" content="How to develop an end-user application using network communications."><meta property="og:image" content="https://keyple.org/media/logo.svg"><meta property="og:locale" content="en-us"><meta property="article:modified_time" content="2024-06-04T14:21:19+02:00"><title>Distributed application | Eclipse Keyple</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=381273b4ac828b7943d728cba3e1f187><script src=../../../../js/wowchemy-init.min.d66af272089c6c0601f1a57edc3bf6ab.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class="page-header header--fixed"><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=../../../../><img src=../../../../media/logo.svg alt="Eclipse Keyple"></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=../../../../><img src=../../../../media/logo.svg alt="Eclipse Keyple"></a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>What is Eclipse Keyple®</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=../../../../what-is-keyple/overview/><span>Overview</span></a>
<a class=dropdown-item href=../../../../what-is-keyple/why-trust/><span>Why trust Eclipse Keyple®?</span></a>
<a class=dropdown-item href=../../../../what-is-keyple/who-is-it-for/><span>Who is it for?</span></a>
<a class=dropdown-item href=../../../../#adopters><span>Who is using Eclipse Keyple®?</span></a>
<a class=dropdown-item href=../../../../what-is-keyple/what-is-calypso/><span>What is Calypso®?</span></a>
<a class=dropdown-item href=../../../../what-is-keyple/main-features/><span>Keyple's main features</span></a>
<a class=dropdown-item href=../../../../#news><span>News</span></a></div></li><li class=nav-item><a class=nav-link href=../../../../learn/overview><span>Learn</span></a></li><li class=nav-item><a class=nav-link href=../../../../components/overview><span>Components</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Community</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=../../../../adopters-and-testimonials/><span>Adopters & Testimonials</span></a>
<a class=dropdown-item href=../../../../community/contributing/><span>Contributing</span></a>
<a class=dropdown-item href=../../../../community/roadmap/><span>Roadmap</span></a>
<a class=dropdown-item href=../../../../community/changelog/><span>Changelog</span></a>
<a class=dropdown-item href=../../../../project-dashboard/><span>Project dashboard</span></a>
<a class=dropdown-item href=../../../../statistics/><span>Statistics</span></a>
<a class=dropdown-item href="https://sonarcloud.io/organizations/eclipse/projects?search=keyple&amp;sort=-analysis_date"><span>Code quality dashboard</span></a>
<a class=dropdown-item href=https://projects.eclipse.org/projects/iot.keyple/><span>Eclipse Foundation Keyple page</span></a>
<a class=dropdown-item href=https://accounts.eclipse.org/mailing-list/keyple-dev/><span>Mailing list</span></a>
<a class=dropdown-item href=https://github.com/eclipse-keyple/><span>GitHub home repository</span></a>
<a class=dropdown-item href=https://docs.keyple.org/><span>All APIs docs</span></a></div></li><li class=nav-item><a class=nav-link href=../../../../external-resources/><span>External resources</span></a></li><li class=nav-item><a class=nav-link href=../../../../learn/build-your-first-app/><button class='btn btn-info'><i class='fas fa-rocket pr-1' aria-hidden=true></i> <span>START CODING</span></button></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav></header></div><div class=page-body><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">Developer guides
</span><span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>Search...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li><a href=../../../../archives/></a></li><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/docs-1.0/>== Docs 1.x ==</a><ul class="nav docs-sidenav"><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/docs-1.0/build-your-first-app/>Build your first app</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/docs-1.0/build-your-first-app/java-app/>Java</a></li><li><a href=../../../../archives/docs-1.0/build-your-first-app/android-app/>Android</a></li><li><a href=../../../../archives/docs-1.0/build-your-first-app/cpp-app/>C++</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/docs-1.0/developer-guide/>Developer guides</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/docs-1.0/developer-guide/common-concepts/>Common concepts</a></li><li><a href=../../../../archives/docs-1.0/developer-guide/standalone-application/>Standalone application</a></li><li class=active><a href=../../../../archives/docs-1.0/developer-guide/distributed-application/>Distributed application</a></li><li><a href=../../../../archives/docs-1.0/developer-guide/calypso-application/>Calypso application</a></li><li><a href=../../../../archives/docs-1.0/developer-guide/create-plugin/>Create a plugin</a></li><li><a href=../../../../archives/docs-1.0/developer-guide/create-extension/>Create an extension</a></li><li><a href=../../../../archives/docs-1.0/developer-guide/upgrade/>Upgrade Keyple</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/docs-1.0/api-reference/>API reference</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/docs-1.0/api-reference/java-api/>Java</a></li><li><a href=../../../../archives/docs-1.0/api-reference/cpp-api/>C++</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/docs-1.0/architecture/>Architecture</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/docs-1.0/architecture/keyple-global/>Global Solution</a></li><li><a href=../../../../archives/docs-1.0/architecture/keyple-core/>Keyple Core</a></li><li><a href=../../../../archives/docs-1.0/architecture/keyple-calypso/>Keyple Calypso</a></li></ul></div></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-java-1.0/>== Java 1.x components ==</a><ul class="nav docs-sidenav"><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-java-1.0/core/>Core</a></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-java-1.0/distributed-systems/>Distributed systems</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/components-java-1.0/distributed-systems/local/>Local</a></li><li><a href=../../../../archives/components-java-1.0/distributed-systems/network/>Network</a></li><li><a href=../../../../archives/components-java-1.0/distributed-systems/remote/>Remote</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-java-1.0/extensions/>Extensions</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/components-java-1.0/extensions/calypso/>Calypso</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-java-1.0/plugins/>Reader plugins</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/components-java-1.0/plugins/nfc/>NFC</a></li><li><a href=../../../../archives/components-java-1.0/plugins/omapi/>OMAPI</a></li><li><a href=../../../../archives/components-java-1.0/plugins/pcsc/>PC/SC</a></li><li><a href=../../../../archives/components-java-1.0/plugins/stub/>Stub</a></li></ul></div></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-cpp-0.9/>== C++ 0.x components ==</a><ul class="nav docs-sidenav"><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-cpp-0.9/core/>Core</a></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-cpp-0.9/extensions/>Extensions</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/components-cpp-0.9/extensions/calypso/>Calypso</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../../archives/components-cpp-0.9/plugins/>Reader plugins</a><ul class="nav docs-sidenav"><li><a href=../../../../archives/components-cpp-0.9/plugins/pcsc/>PC/SC</a></li><li><a href=../../../../archives/components-cpp-0.9/plugins/stub/>Stub</a></li></ul></div></ul></div></ul></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#how-to-use-it->How to use it ?</a></li><li><a href=#concepts>Concepts</a></li><li><a href=#configuration-modes>Configuration modes</a><ul><li><a href=#reader-client-side>Reader Client Side</a></li><li><a href=#reader-server-side>Reader Server Side</a></li><li><a href=#pool-reader-server-side>Pool Reader Server Side</a></li></ul></li><li><a href=#use-cases>Use cases</a><ul><li></li></ul></li><li><a href=#network-configuration>Network configuration</a><ul><li><a href=#synchronous>Synchronous</a></li><li><a href=#asynchronous>Asynchronous</a></li><li><a href=#exchanged-data>Exchanged data</a></li></ul></li><li><a href=#apis>APIs</a><ul><li><a href=#network-api>Network API</a></li><li><a href=#remote-api>Remote API</a></li><li><a href=#local-api>Local API</a></li></ul></li><li><a href=#examples>Examples</a></li><li><a href=#download>Download</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><div class=docs-article-container></div><div class=docs-article-container><h1>Distributed application</h1><article class=article-style><div class="alert alert-warning"><div>Version 1.0 of the documentation is no longer actively maintained. The site that you are currently viewing is an archived snapshot. For up-to-date documentation, see the latest version.</div></div><h2 id=overview>Overview</h2><p><strong>Keyple provides the &ldquo;Keyple Distributed&rdquo; solution which allows a terminal to communicate with a smart card reader available in another terminal</strong>.</p><p>In this way, you can manage transactions within a distributed architecture.</p><p>The diagram below shows the role of the <strong>Keyple Distributed</strong> components in the software layers used in a distributed architecture :</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/component/Distributed_Component_Overview.svg alt loading=lazy data-zoomable></div></div></figure><br><h2 id=how-to-use-it->How to use it ?</h2><ol><li>In pre-requisite, read page <a href=../../../../archives/docs-1.0/developer-guide/standalone-application/>Standalone application</a> to understand the main concepts of Keyple in a standalone application.</li><li>Read chapter <a href=#concepts>Concepts</a> to understand the main terms and concepts of the <strong>Keyple Distributed</strong> solution.</li><li>Read the introduction of chapter <a href=#configuration-modes>Configuration modes</a> to be informed about the different features and APIs proposed by the solution.</li><li>Using chapter <a href=#use-cases>Use cases</a>, find your use case. This will help you to determine exactly which library and API to use.</li><li>Using chapter <a href=#download>Download</a>, import into your project the libraries specified by your use case.</li><li>Using chapter <a href=#network-configuration>Network configuration</a>, implement the transport layer adapted to your network configuration.</li><li>Implement your ticketing services as specified in the associated use case.</li></ol><br><h2 id=concepts>Concepts</h2><p>Here are the main concepts to keep in mind before continuing to read this user guide :</p><div id=concepts-table-1><table><thead><tr><th>Concept</th><th>Description</th></tr></thead><tbody><tr><td><strong>Remote Lib</strong></td><td>This is the library <code>keyple-java-distributed-remote</code>.<br>It must be imported and used by the application installed on the terminal not having local access to the smart card reader and that wishes to control the reader remotely.</td></tr><tr><td><strong>Local Lib</strong></td><td>This is the library <code>keyple-java-distributed-local</code>.<br>It must be imported and used by the application installed on the terminal having local access to the smart card reader but wishes to delegate all or part of the ticketing processing to a remote application.</td></tr><tr><td><strong>Network Lib</strong></td><td>This is the library <code>keyple-java-distributed-network</code>.<br>This library is <strong>implicitly</strong> imported by <strong>Remote Lib</strong> and <strong>Local Lib</strong> because it contains common network elements.</td></tr><tr><td><strong>Remote Plugin</strong></td><td>Part of the <strong>Remote Lib</strong>, this is a Keyple plugin which provides only <strong>Remote Readers</strong> to the application. It manages data exchanges with the <strong>Local Service</strong>. This plugin must be registered to the smart card service like any Keyple plugin.</td></tr><tr><td><strong>Remote Reader</strong></td><td>Part of the <strong>Remote Plugin</strong>, this is a Keyple reader which has some specificities :<br>- each remote reader is connected to a local reader ;<br>- any command sent by the application to a remote reader will be forwarded to the associated local reader ;<br>- any event occurs on a local reader or plugin will be forwarded to the associated remote reader or plugin.</td></tr><tr><td><strong>Local Service</strong></td><td>Part of the <strong>Local Lib</strong>, this service ensures data exchange between the <strong>Remote Plugin</strong> and local plugins and readers. It must be initialized and started by the host application.</td></tr><tr><td><strong>Factory</strong></td><td><strong>Remote Plugin</strong> and <strong>Local Service</strong> each have a specific factory class to initialize them.</td></tr><tr><td><strong>Utility</strong></td><td><strong>Remote Plugin</strong> and <strong>Local Service</strong> each have a specific utility class to access them everywhere in the code.</td></tr><tr><td><strong>Node</strong></td><td><strong>Remote Plugin</strong> and <strong>Local Service</strong> each are bind to a specific internal node which is responsible for the interfacing with the <strong>Network Endpoint</strong>.</td></tr><tr><td><strong>Network Endpoint</strong></td><td>At the user&rsquo;s charge, this component ensures the network exchanges between the <strong>Remote Plugin</strong> and <strong>Local Service</strong> nodes.</td></tr></tbody></table></div><style>#concepts-table-1 table th:first-of-type{width:130px}</style><p>The diagram below illustrates the main functional concepts through a standard use case :</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/component/Distributed_Component_Concepts_1.svg alt loading=lazy data-zoomable></div></div></figure><p>The second diagram below illustrates an arbitrary more complex possible use case with several hardware readers connected to different terminals.</p><p>These could be for example a ticketing reloading service, where the business logic would be on the terminal with remote readers, with thin clients on A & B terminals communicating locally with the cards.</p><p>In this use case, the <strong>Keyple Distributed</strong> solution is use for card communication.</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/component/Distributed_Component_Concepts_2.svg alt loading=lazy data-zoomable></div></div></figure><p>Here is another example, but this time it illustrates several <strong>Remote Plugin</strong> components connected to the same <strong>Local Service</strong>.</p><p>These could be for example ticketing terminals with transaction logic, which communicate locally with cards, but which do not have SAM, and which use a SAM server with hardware reader.</p><p>In this use case, the <strong>Keyple Distributed</strong> solution is use for SAM communication.</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/component/Distributed_Component_Concepts_3.svg alt loading=lazy data-zoomable></div></div></figure><br><h2 id=configuration-modes>Configuration modes</h2><p>The <strong>Keyple Distributed</strong> solution provides <strong>3</strong> different configuration modes, each one having a specific <a href=#apis>API</a> designed on a <strong>Client-Server</strong> model :</p><div id=plugins-table-1><table><thead><tr><th>Configuration mode</th><th>Description</th></tr></thead><tbody><tr><td><a href=#reader-client-side>Reader Client Side</a></td><td>Allows a <strong>server</strong> application to control a smart card reader available on a <strong>client</strong> (e.g. PO reader).</td></tr><tr><td><a href=#reader-server-side>Reader Server Side</a></td><td>Allows a <strong>client</strong> application to control a smart card reader available on a <strong>server</strong> (e.g. SAM reader).</td></tr><tr><td><a href=#pool-reader-server-side>Pool Reader Server Side</a></td><td>Allows a <strong>client</strong> application to control a <strong>pool</strong> of smart cards readers available on a <strong>server</strong> (e.g. HSM readers).</td></tr></tbody></table></div><style>#plugins-table-1 table th:first-of-type{width:190px}</style><p>Each mode provides a different <strong>Remote Plugin</strong> and <strong>Local Service</strong> components and their associated factories and utility classes.</p><p>Each <strong>Remote Plugin</strong> and <strong>Local Service</strong> has a default name, but it&rsquo;s possible to specify a custom name during the initialization phase.</p><p>In an application, it is thus possible to use simultaneously several configuration modes and as many instances of a configuration mode as you want, as long as the components are initialized with different names.</p><h3 id=reader-client-side>Reader Client Side</h3><p>This configuration mode allows a <strong>server</strong> application to control a smart card reader available on a <strong>client</strong> (e.g. PO reader).</p><table><thead><tr><th>API</th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Library</strong></td><td>Local Lib</td><td>Remote Lib</td></tr><tr><td><strong>Remote Plugin</strong> / <strong>Local Service</strong></td><td><code>LocalServiceClient</code></td><td><code>RemotePluginServer</code></td></tr><tr><td><strong>Factory</strong></td><td><code>LocalServiceClientFactory</code></td><td><code>RemotePluginServerFactory</code></td></tr><tr><td><strong>Utility</strong></td><td><code>LocalServiceClientUtils</code></td><td><code>RemotePluginServerUtils</code></td></tr></tbody></table><h4 id=operating-mode>OPERATING MODE</h4><ul><li>Server side :<ol><li>configure the factory by providing the network and plugin observer implementation. Please note that <strong>this plugin is observable only to trigger ticketing services</strong> on the server side, but does not allow observation on the local plugin (reader insertion, etc&mldr;),</li><li>register the <strong>Remote Plugin</strong> to the smart card service using the factory,</li><li>await for events of type <code>PluginEvent.READER_CONNECTED</code>,</li><li>when an event occurs, get the specified remote reader from the <strong>Remote Plugin</strong>,</li><li>use information inside the remote reader to identify the ticketing service to execute,</li><li>execute the specified ticketing service using the remote reader and all of its others information,</li><li>terminate the remote ticketing service using the <strong>Remote Plugin</strong> API by transmitting if needed personal information to the client.</li></ol></li><li>Client side :<ol><li>configure the factory and start the <strong>Local Service</strong> by providing the network implementation,</li><li>register at least a local plugin to the smart card service and get the local reader to connect to the server,</li><li>execute the remote service using the <strong>Local Service</strong> API by indicating the ticketing service id to execute and transmitting to the server if needed personal information or smart card content previously read.</li></ol></li></ul><h4 id=illustration>ILLUSTRATION</h4><p>The following sequence diagram shows the capabilities of the plugin through an arbitrary example that illustrates :</p><ul><li>the initialization phase of the local and remote components ;</li><li>the registration of the local plugin and observable reader ;</li><li>the selection phase of an observable reader carried out directly by the client ;</li><li>the sending of the selection result and additional information to the server to remotely perform a specific ticketing service (materialization, validation, etc&mldr;) ;</li><li>the reception by the server of the transmitted data ;</li><li>the execution of the remote ticketing service ;</li><li>the server subscription to observable reader events ;</li><li>the sending of information to the client at the end of processing.</li></ul><p>Note that the network layer is deliberately hide in this diagram. Its implementation is described in the <a href=#network-configuration>Network configuration</a> chapter.</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/sequence/Distributed_Sequence_ReaderClientSide_API.svg alt loading=lazy data-zoomable></div></div></figure><h3 id=reader-server-side>Reader Server Side</h3><div class="alert alert-warning"><div>This configuration mode will only be available from version <strong>1.1</strong> onwards.</div></div><p>This configuration mode allows a <strong>client</strong> application to control a smart card reader available on a <strong>server</strong> (e.g. SAM reader).</p><p>It also allows to observe the plugin events (such as reader connection, etc&mldr;) if desired.</p><table><thead><tr><th>API</th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Library</strong></td><td>Remote Lib</td><td>Local Lib</td></tr><tr><td><strong>Remote Plugin</strong> / <strong>Local Service</strong></td><td><code>RemotePluginClient</code> or<br><code>ObservableRemotePluginClient</code></td><td><code>LocalServiceServer</code></td></tr><tr><td><strong>Factory</strong></td><td><code>RemotePluginClientFactory</code></td><td><code>LocalServiceServerFactory</code></td></tr><tr><td><strong>Utility</strong></td><td><code>RemotePluginClientUtils</code></td><td><code>LocalServiceServerUtils</code></td></tr></tbody></table><h4 id=operating-mode-1>OPERATING MODE</h4><ul><li>Server side :<ol><li>configure the factory and start the <strong>Local Service</strong> by providing the network implementation,</li><li>register at least a local plugin to the smart card service.</li></ol></li><li>Client side :<ol><li>configure the factory by providing the network implementation,</li><li>register the <strong>Remote Plugin</strong> to the smart card service using the factory,</li><li>use the <strong>Remote Plugin</strong> and its remote readers as a local plugin (or observable plugin) with local readers.</li></ol></li></ul><h3 id=pool-reader-server-side>Pool Reader Server Side</h3><p>This configuration mode allows a <strong>client</strong> application to control a <strong>pool</strong> of smart cards readers available on a <strong>server</strong> (e.g. HSM readers).</p><table><thead><tr><th>API</th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Library</strong></td><td>Remote Lib</td><td>Local Lib</td></tr><tr><td><strong>Remote Plugin</strong> / <strong>Local Service</strong></td><td><code>PoolRemotePluginClient</code></td><td><code>PoolLocalServiceServer</code></td></tr><tr><td><strong>Factory</strong></td><td><code>PoolRemotePluginClientFactory</code></td><td><code>PoolLocalServiceServerFactory</code></td></tr><tr><td><strong>Utility</strong></td><td><code>PoolRemotePluginClientUtils</code></td><td><code>PoolLocalServiceServerUtils</code></td></tr></tbody></table><h4 id=operating-mode-2>OPERATING MODE</h4><ul><li>Server<ol><li>configure the factory and start the <strong>Local Service</strong> by providing the network implementation,</li><li>register at least a local pool plugin to the smart card service.</li></ol></li><li>Client<ol><li>configure the factory by providing the network implementation,</li><li>register the <strong>Remote Plugin</strong> to the smart card service using the factory,</li><li>use the <strong>Remote Plugin</strong> and its remote readers as a local pool plugin with local readers.</li></ol></li></ul><br><h2 id=use-cases>Use cases</h2><p>Here is a summary table of all proposed use cases. Search for the one that corresponds to your need and then look at the associated description :</p><div id=use-cases-table-2><table><thead><tr><th style=text-align:center>Use Case</th><th style=text-align:center>Reader type</th><th style=text-align:center>Reader endpoint</th><th style=text-align:center>Reader observation</th><th style=text-align:center>Plugin observation</th></tr></thead><tbody><tr><td style=text-align:center><a href=#uc-1>UC 1</a></td><td style=text-align:center>Simple</td><td style=text-align:center>Client</td><td style=text-align:center></td><td style=text-align:center></td></tr><tr><td style=text-align:center><a href=#uc-2>UC 2</a></td><td style=text-align:center>Simple</td><td style=text-align:center>Client</td><td style=text-align:center>&#x2714;&#xfe0f;</td><td style=text-align:center></td></tr><tr><td style=text-align:center><a href=#uc-3>UC 3</a></td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center></td><td style=text-align:center></td></tr><tr><td style=text-align:center><a href=#uc-4>UC 4</a></td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center>&#x2714;&#xfe0f;</td><td style=text-align:center></td></tr><tr><td style=text-align:center><a href=#uc-5>UC 5</a></td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center></td><td style=text-align:center>&#x2714;&#xfe0f;</td></tr><tr><td style=text-align:center><a href=#uc-6>UC 6</a></td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center>&#x2714;&#xfe0f;</td><td style=text-align:center>&#x2714;&#xfe0f;</td></tr><tr><td style=text-align:center><a href=#uc-7>UC 7</a></td><td style=text-align:center>Pool</td><td style=text-align:center>Server</td><td style=text-align:center></td><td style=text-align:center></td></tr></tbody></table></div><style>#use-cases-table-2 table th:nth-of-type(6){width:240px}</style><h4 id=uc-1>UC 1</h4><p>This use case requires to use the <a href=#reader-client-side>Reader Client Side</a> configuration mode.</p><p>Use this mode if you don&rsquo;t plan to observe &ldquo;remotely&rdquo; the events related to the local reader (smart card insertion, removal, etc&mldr;).</p><p>Please note that it is still possible to observe locally the reader on the client side if needed.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>Methods to be used when initializing the factory</td><td><code>withoutReaderObservation()</code></td><td>-</td></tr><tr><td>Possible readers to use</td><td><code>Reader</code> or <code>ObservableReader</code></td><td><code>RemoteReaderServer</code></td></tr></tbody></table><h4 id=uc-2>UC 2</h4><p>This use case requires to use the <a href=#reader-client-side>Reader Client Side</a> configuration mode.</p><p>Use this mode if you plan to observe &ldquo;remotely&rdquo; the events related to the local reader (smart card insertion, removal, etc&mldr;).</p><p>Please note that this mode is only possible if the local reader is observable.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>Methods to be used when initializing the factory</td><td><code>withReaderObservation(...)</code></td><td>-</td></tr><tr><td>Possible readers to use</td><td><code>ObservableReader</code></td><td><code>ObservableRemoteReaderServer</code></td></tr></tbody></table><p>To observe &ldquo;remotely&rdquo; the reader events, you must :</p><ul><li>Server<ol><li>register at least one observer to the remote reader created during the first client call and await for reader events,</li><li>retrieve the remote reader from the <strong>Remote Plugin</strong> <strong>imperatively</strong> using the reader name contained in the received event,</li><li>execute the ticketing service associated to the event using the remote reader and all of its others information,</li><li>terminate the remote ticketing service associated to the event using the <strong>Remote Plugin</strong> API by transmitting if needed personal information to the client.</li></ol></li><li>Client<ol><li>execute a remote service first in order to connect a remote reader to the local reader and to allow the remote application to subscribe to the events of the remote reader.</li></ol></li></ul><h4 id=uc-3>UC 3</h4><p>This use case requires to use the <a href=#reader-server-side>Reader Server Side</a> configuration mode with the <code>RemotePluginClient</code> plugin.</p><p>Use this mode if you don&rsquo;t plan to observe &ldquo;remotely&rdquo; the events related to the local reader (smart card insertion, removal, etc&mldr;).</p><p>Please note that it is still possible to observe locally the reader on the server side if needed.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>Methods to be used when initializing the factory</td><td><code>withoutPluginObservation()</code><br><code>withoutReaderObservation()</code></td><td>-</td></tr><tr><td>Possible readers to use</td><td><code>Reader</code></td><td><code>Reader</code> or <code>ObservableReader</code></td></tr></tbody></table><h4 id=uc-4>UC 4</h4><p>This use case requires to use the <a href=#reader-server-side>Reader Server Side</a> configuration mode with the <code>RemotePluginClient</code> plugin.</p><p>Use this mode if you plan to observe &ldquo;remotely&rdquo; the events related to the local reader (smart card insertion, removal, etc&mldr;).</p><p>Please note that this mode is only possible if the local reader is observable.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>Methods to be used when initializing the factory</td><td><code>withoutPluginObservation()</code><br><code>withReaderObservation()</code></td><td>-</td></tr><tr><td>Possible readers to use</td><td><code>ObservableReader</code></td><td><code>ObservableReader</code></td></tr></tbody></table><h4 id=uc-5>UC 5</h4><p>This use case requires to use the <a href=#reader-server-side>Reader Server Side</a> configuration mode with the <code>ObservableRemotePluginClient</code> plugin.</p><p>Use this mode if you don&rsquo;t plan to observe &ldquo;remotely&rdquo; the events related to the local reader (smart card insertion, removal, etc&mldr;).</p><p>Please note that it is still possible to observe locally the reader on the server side if needed.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>Methods to be used when initializing the factory</td><td><code>withPluginObservation()</code><br><code>withoutReaderObservation()</code></td><td>-</td></tr><tr><td>Possible readers to use</td><td><code>Reader</code></td><td><code>Reader</code> or <code>ObservableReader</code></td></tr></tbody></table><h4 id=uc-6>UC 6</h4><p>This use case requires to use the <a href=#reader-server-side>Reader Server Side</a> configuration mode with the <code>ObservableRemotePluginClient</code> plugin.</p><p>Use this mode if you plan to observe &ldquo;remotely&rdquo; the events related to the local reader (smart card insertion, removal, etc&mldr;).</p><p>Please note that this mode is only possible if the local reader is observable.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>Methods to be used when initializing the factory</td><td><code>withPluginObservation()</code><br><code>withReaderObservation()</code></td><td>-</td></tr><tr><td>Possible readers to use</td><td><code>ObservableReader</code></td><td><code>ObservableReader</code></td></tr></tbody></table><h4 id=uc-7>UC 7</h4><p>This use case requires to use the <a href=#pool-reader-server-side>Pool Reader Server Side</a> configuration mode.</p><p>This unique mode proposed for this plugin does not allow to observe the local reader.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>Methods to be used when initializing the factory</td><td>-</td><td>-</td></tr><tr><td>Possible readers to use</td><td><code>Reader</code></td><td><code>Reader</code></td></tr></tbody></table><br><h2 id=network-configuration>Network configuration</h2><p>The <strong>Keyple Distributed</strong> solution <strong>does not provide</strong> the network layer implementation, but it provides a set of SPIs (Service Provider Interfaces) to be implemented by the user in order to enable it to exchange data between <strong>Remote Plugin</strong> and <strong>Local Service</strong> components.</p><h3 id=synchronous>Synchronous</h3><p>Choose this mode if you want to implement a Client-Server <strong>Synchronous</strong> communication protocol, such as standard HTTP for example.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>SPI to be implemented</td><td><code>SyncEndpointClient</code></td><td>-</td></tr><tr><td>Node API</td><td><code>SyncNodeClient</code></td><td><code>SyncNodeServer</code></td></tr><tr><td>Methods to be used when initializing the factory</td><td><code>withSyncNode(...)</code></td><td><code>withSyncNode(...)</code></td></tr><tr><td>Utility method to use to access the node</td><td>-</td><td><code>getSyncNode()</code> or<br><code>getSyncNode(...)</code></td></tr></tbody></table><p>Here is the minimal algorithm to implement in a context with a <strong>single server instance</strong> :</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/sequence/Distributed_Sequence_SyncNode_API.svg alt loading=lazy data-zoomable></div></div></figure><p>In a context with several server instances, a mechanism must be implemented to ensure that all messages containing information about a <code>serverNodeId</code> are routed to the server associated with a <code>SyncNodeServer</code> node having the <code>serverNodeId</code>.</p><h3 id=asynchronous>Asynchronous</h3><p>Choose this mode if you want to implement a Full-Duplex <strong>Asynchronous</strong> communication protocol, such as Web Sockets for example.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td>SPI to be implemented</td><td><code>AsyncEndpointClient</code></td><td><code>AsyncEndpointServer</code></td></tr><tr><td>Node API</td><td><code>AsyncNodeClient</code></td><td><code>AsyncNodeServer</code></td></tr><tr><td>Methods to be used when initializing the factory</td><td><code>withAsyncNode(...)</code></td><td><code>withAsyncNode(...)</code></td></tr><tr><td>Utility method to use to access the node</td><td><code>getAsyncNode()</code> or<br><code>getAsyncNode(...)</code></td><td><code>getAsyncNode()</code> or<br><code>getAsyncNode(...)</code></td></tr></tbody></table><p>Here is the minimal algorithm to implement :</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/sequence/Distributed_Sequence_AsyncNode_API.svg alt loading=lazy data-zoomable></div></div></figure><h3 id=exchanged-data>Exchanged data</h3><p>The data exchanged between <strong>Remote Plugin</strong> and <strong>Local Service</strong> components are contained in the DTO (Data Transfer Object) <code>MessageDto</code>. It is built and processed by the plugin and <strong>you don&rsquo;t need to modify it</strong>.</p><p>However, it is necessary in some contexts to access certain information such as the <code>sessionId</code> in the case of asynchronous communication or the <code>serverNodeId</code> in the case of synchronous communication with several server instances.</p><br><h2 id=apis>APIs</h2><p>The class diagrams below shows the different APIs exposed and SPIs required by the <strong>Keyple Distributed</strong> solution.</p><p>An <strong>SPI</strong> (Service Provider Interface) is an interface that must be implemented by the user.</p><p>Here are the available APIs depending on the library imported by your project :</p><table><thead><tr><th></th><th style=text-align:center>Remote Lib</th><th style=text-align:center>Local Lib</th></tr></thead><tbody><tr><td><a href=#network-api>Network API</a></td><td style=text-align:center>&#x2714;&#xfe0f;</td><td style=text-align:center>&#x2714;&#xfe0f;</td></tr><tr><td><a href=#remote-api>Remote API</a></td><td style=text-align:center>&#x2714;&#xfe0f;</td><td style=text-align:center></td></tr><tr><td><a href=#local-api>Local API</a></td><td style=text-align:center></td><td style=text-align:center>&#x2714;&#xfe0f;</td></tr></tbody></table><p>The associated <strong>API</strong> documentations are accessible from the page <a href=https://keyple.org/archives/docs-1.0/api-reference/>API Reference</a>.</p><h3 id=network-api>Network API</h3><p>The associated <strong>API</strong> documentation is available <a href=../../api-reference/java-api/keyple-java-distributed-network/1.0.0/index.html>here</a>.</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/class/Distributed_Class_Network_API.svg alt loading=lazy data-zoomable></div></div></figure><h3 id=remote-api>Remote API</h3><p>The associated <strong>API</strong> documentation is available <a href=../../api-reference/java-api/keyple-java-distributed-remote/1.0.0/index.html>here</a>.</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/class/Distributed_Class_Remote_API.svg alt loading=lazy data-zoomable></div></div></figure><h3 id=local-api>Local API</h3><p>The associated <strong>API</strong> documentation is available <a href=../../api-reference/java-api/keyple-java-distributed-local/1.0.0/index.html>here</a>.</p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../../media/archive-1.0/distributed-application/class/Distributed_Class_Local_API.svg alt loading=lazy data-zoomable></div></div></figure><br><h2 id=examples>Examples</h2><ul><li><a href=https://github.com/eclipse-keyple/keyple-java/tree/master/java/example/generic/distributed target=_blank rel=noopener>Java examples</a></li></ul><br><h2 id=download>Download</h2><ul><li><a href=https://keyple.org/archives/components-java-1.0/distributed-systems/>Java components</a></li></ul></article><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Previous</div><a href=../../../../archives/docs-1.0/developer-guide/standalone-application/ rel=next>Standalone application</a></div><div class=post-nav-item><div class=meta-nav>Next</div><a href=../../../../archives/docs-1.0/developer-guide/calypso-application/ rel=prev>Calypso application</a></div></div></div></div><div class=body-footer><p>Last updated on 2024-06-04</p></div><footer class=site-footer><div class=container><div class="row featurette"><div class="col-12 col-sm-4"><p style=color:#fff><b>ECLIPSE LEGAL</b></p><a href=https://www.eclipse.org/legal/privacy.php>Privacy Policy</a><br><a href=https://www.eclipse.org/legal/termsofuse.php>Terms of Use</a><br><a href=https://www.eclipse.org/legal/copyright.php>Copyright Agent</a><br><a href=https://www.eclipse.org/legal/epl-2.0/>Eclipse Public License</a><br><a href=https://www.eclipse.org/legal/>Legal Resources</a><br><a href=https://eclipse.org/security/ target=_blank>Report a Vulnerability</a><br></div><div class="col-12 col-sm-4"><a href=https://www.eclipse.org target=_blank><img src=../../../../media/eclipse_foundation_logo.svg id=logo-eclipse-foundation></a></div><div class="col-12 col-sm-4"><a href=https://iot.eclipse.org target=_blank><img src=../../../../media/eclipse_iot_logo.svg id=logo-eclipse-iot></a></div></div></div><p class="powered-by copyright-license-text">© 2019-2025 The Eclipse Keyple® project. All Rights Reserved.</p><p class=powered-by id=template-info>Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target=_blank rel=noopener>Hugo Blox Builder</a> — the free, <a href=https://github.com/HugoBlox/hugo-blox-builder target=_blank rel=noopener>open source</a> website builder that empowers creators.</p></footer></main></div></div></div><div class=page-footer></div><script src=../../../../js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js></script><script src=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js integrity crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js integrity="sha256-aQmOEF2ZD4NM/xt4hthzREIo/2PFkOX/g01WjxEV7Ys=" crossorigin=anonymous></script><script>anchors.add()</script><script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script><script id=page-data type=application/json>{"use_headroom":false}</script><script src=../../../../en/js/wowchemy.min.832c8284a51e039bb1ffe4c081907bbe.js></script><script src=../../../../js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js type=module></script><link rel=stylesheet href=https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css><script src=https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js></script><script src=https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js></script><script src=https://d3js.org/d3.v6.min.js></script></body></html>