<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Keyple C++: keyple::calypso::transaction::PoTransaction Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Keyple C++
   &#160;<span id="projectnumber">0.9.0</span>
   </div>
   <div id="projectbrief">Keyple, an Open Source SDK for Ticketing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dd/ddf/namespacekeyple.html">keyple</a></li><li class="navelem"><a class="el" href="../../d9/dc8/namespacekeyple_1_1calypso.html">calypso</a></li><li class="navelem"><a class="el" href="../../d8/d57/namespacekeyple_1_1calypso_1_1transaction.html">transaction</a></li><li class="navelem"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html">PoTransaction</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../d5/d7b/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">keyple::calypso::transaction::PoTransaction Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;PoTransaction.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_session_setting.html">SessionSetting</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d97/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_sv_settings.html">SvSettings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a6f6de4731e5e5c4fc7de1c42b5d3eeac"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6f6de4731e5e5c4fc7de1c42b5d3eeac">SessionState</a> { <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6f6de4731e5e5c4fc7de1c42b5d3eeaca836d7dc2e7bceeceacd08395975a0fcb">SessionState::SESSION_UNINITIALIZED</a>, 
<a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6f6de4731e5e5c4fc7de1c42b5d3eeaca97d7b25f9b3e64e9baf45d587e79aac1">SessionState::SESSION_OPEN</a>, 
<a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6f6de4731e5e5c4fc7de1c42b5d3eeacaed9cdac35d4b94f56f047226ea83fefd">SessionState::SESSION_CLOSED</a>
 }</td></tr>
<tr class="separator:a6f6de4731e5e5c4fc7de1c42b5d3eeac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a717737da32739bee8fd7bbda80d06ea5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a717737da32739bee8fd7bbda80d06ea5">PinTransmissionMode</a> { <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a717737da32739bee8fd7bbda80d06ea5af62eb0bf5e5c72e80983fbbac1cb70e5">PinTransmissionMode::PLAIN</a>, 
<a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a717737da32739bee8fd7bbda80d06ea5a3fe1c5068682cdee737d379207ab631f">PinTransmissionMode::ENCRYPTED</a>
 }</td></tr>
<tr class="separator:a717737da32739bee8fd7bbda80d06ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1e9d6d4b967c1748fb7dd5aa83e9a12e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a1e9d6d4b967c1748fb7dd5aa83e9a12e">PoTransaction</a> (std::shared_ptr&lt; <a class="el" href="../../df/dc7/classkeyple_1_1core_1_1selection_1_1_se_resource.html">SeResource</a>&lt; <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a> &gt;&gt; poResource, std::shared_ptr&lt; <a class="el" href="../../dc/d10/classkeyple_1_1calypso_1_1transaction_1_1_po_security_settings.html">PoSecuritySettings</a> &gt; poSecuritySettings)</td></tr>
<tr class="separator:a1e9d6d4b967c1748fb7dd5aa83e9a12e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c4762a05351124bad2f40c09b50b4cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6c4762a05351124bad2f40c09b50b4cb">PoTransaction</a> (std::shared_ptr&lt; <a class="el" href="../../df/dc7/classkeyple_1_1core_1_1selection_1_1_se_resource.html">SeResource</a>&lt; <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a> &gt;&gt; poResource)</td></tr>
<tr class="separator:a6c4762a05351124bad2f40c09b50b4cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39eece6d2aa65793029701a0c9d773d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a39eece6d2aa65793029701a0c9d773d8">processOpening</a> (const <a class="el" href="../../d4/dc2/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_session_setting_1_1_access_level.html">SessionSetting::AccessLevel</a> &amp;accessLevel)</td></tr>
<tr class="separator:a39eece6d2aa65793029701a0c9d773d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624987a136bfc437f5ab139066783faa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a624987a136bfc437f5ab139066783faa">processClosing</a> ()</td></tr>
<tr class="separator:a624987a136bfc437f5ab139066783faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee03855668a2d540277680a957da0ca8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#aee03855668a2d540277680a957da0ca8">processPoCommands</a> ()</td></tr>
<tr class="separator:aee03855668a2d540277680a957da0ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a95e09fcf0de5797c9e9b2a82802aea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a9a95e09fcf0de5797c9e9b2a82802aea">processCancel</a> ()</td></tr>
<tr class="separator:a9a95e09fcf0de5797c9e9b2a82802aea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70eb927ee2da9b9d0a3e1040cb8f9e5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a70eb927ee2da9b9d0a3e1040cb8f9e5f">processVerifyPin</a> (const std::vector&lt; uint8_t &gt; &amp;pin)</td></tr>
<tr class="separator:a70eb927ee2da9b9d0a3e1040cb8f9e5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa92e74a7689fcf603a484bee464a2eb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#aa92e74a7689fcf603a484bee464a2eb7">processVerifyPin</a> (const std::string &amp;pin)</td></tr>
<tr class="separator:aa92e74a7689fcf603a484bee464a2eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b0c7896fb8567547bde284d3c2755d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a94b0c7896fb8567547bde284d3c2755d">prepareSelectFile</a> (const std::vector&lt; uint8_t &gt; &amp;lid)</td></tr>
<tr class="separator:a94b0c7896fb8567547bde284d3c2755d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c26fe88b9af6da7e1db688f09db2736"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a4c26fe88b9af6da7e1db688f09db2736">prepareSelectFile</a> (const <a class="el" href="../../d9/dc8/namespacekeyple_1_1calypso.html#a9d7e9d8c6fe5880d4788a49af23737d3">SelectFileControl</a> control)</td></tr>
<tr class="separator:a4c26fe88b9af6da7e1db688f09db2736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0861ce123355e703c9f714edaaee95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a0e0861ce123355e703c9f714edaaee95">prepareReadRecordFile</a> (const uint8_t sfi, const uint8_t recordNumber)</td></tr>
<tr class="separator:a0e0861ce123355e703c9f714edaaee95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10f9dd5880312d925563ad033803472a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a10f9dd5880312d925563ad033803472a">prepareReadRecordFile</a> (const uint8_t sfi, const uint8_t firstRecordNumber, const uint8_t numberOfRecords, const uint8_t recordSize)</td></tr>
<tr class="separator:a10f9dd5880312d925563ad033803472a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7f11a907a16944ad56da50a195876a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a9d7f11a907a16944ad56da50a195876a">prepareReadCounterFile</a> (const uint8_t sfi, const uint8_t countersNumber)</td></tr>
<tr class="separator:a9d7f11a907a16944ad56da50a195876a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef04923253cf8d4723971e09de836f43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#aef04923253cf8d4723971e09de836f43">prepareAppendRecord</a> (const uint8_t sfi, const std::vector&lt; uint8_t &gt; &amp;recordData)</td></tr>
<tr class="separator:aef04923253cf8d4723971e09de836f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1e9cdd87b7a41650957a34b488e003"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a0d1e9cdd87b7a41650957a34b488e003">prepareUpdateRecord</a> (const uint8_t sfi, const uint8_t recordNumber, const std::vector&lt; uint8_t &gt; &amp;recordData)</td></tr>
<tr class="separator:a0d1e9cdd87b7a41650957a34b488e003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a37b1c6995ef57b53a8a572ad5ddfe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a72a37b1c6995ef57b53a8a572ad5ddfe">prepareWriteRecord</a> (const uint8_t sfi, const uint8_t recordNumber, const std::vector&lt; uint8_t &gt; &amp;recordData)</td></tr>
<tr class="separator:a72a37b1c6995ef57b53a8a572ad5ddfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b2fffa33102ff9fd534c276ac2576b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a7b2fffa33102ff9fd534c276ac2576b7">prepareIncreaseCounter</a> (const uint8_t sfi, const uint8_t counterNumber, const int incValue)</td></tr>
<tr class="separator:a7b2fffa33102ff9fd534c276ac2576b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8891e08a1077eb617c95f064e741dacc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a8891e08a1077eb617c95f064e741dacc">prepareDecreaseCounter</a> (const uint8_t sfi, const uint8_t counterNumber, const int decValue)</td></tr>
<tr class="separator:a8891e08a1077eb617c95f064e741dacc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db542361ff97cbd1e9795477ac885cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a5db542361ff97cbd1e9795477ac885cd">prepareCheckPinStatus</a> ()</td></tr>
<tr class="separator:a5db542361ff97cbd1e9795477ac885cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25441ac9738c349911928674988d344b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a25441ac9738c349911928674988d344b">prepareSvGet</a> (const <a class="el" href="../../d3/d97/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_sv_settings.html#a4b466ea8d2d146c42bd9d269b71345ff">SvSettings::Operation</a> &amp;svOperation, const <a class="el" href="../../d3/d97/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_sv_settings.html#a00a9cb0e2eaaf1ea9b088d28ff57cc49">SvSettings::Action</a> &amp;svAction)</td></tr>
<tr class="separator:a25441ac9738c349911928674988d344b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9411f5cb63fc80cad538f4e27e315f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a9e9411f5cb63fc80cad538f4e27e315f">prepareSvReload</a> (const int amount, const std::vector&lt; uint8_t &gt; &amp;date, const std::vector&lt; uint8_t &gt; &amp;time, const std::vector&lt; uint8_t &gt; &amp;free)</td></tr>
<tr class="separator:a9e9411f5cb63fc80cad538f4e27e315f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa555afc5ceee84ebca2c7652545b3d14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#aa555afc5ceee84ebca2c7652545b3d14">prepareSvReload</a> (const int amount)</td></tr>
<tr class="separator:aa555afc5ceee84ebca2c7652545b3d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78892f0f669022b0349d5985322ea603"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a78892f0f669022b0349d5985322ea603">prepareSvDebit</a> (const int amount, const std::vector&lt; uint8_t &gt; &amp;date, const std::vector&lt; uint8_t &gt; &amp;time)</td></tr>
<tr class="separator:a78892f0f669022b0349d5985322ea603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef76466c85d499fd831a36928d4f9a26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#aef76466c85d499fd831a36928d4f9a26">prepareSvDebit</a> (const int amount)</td></tr>
<tr class="separator:aef76466c85d499fd831a36928d4f9a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c40230f26d9636e82864ed3007e8b37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a9c40230f26d9636e82864ed3007e8b37">prepareSvReadAllLogs</a> ()</td></tr>
<tr class="separator:a9c40230f26d9636e82864ed3007e8b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ae3a64af29b501211145c6c63cddbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#aa6ae3a64af29b501211145c6c63cddbe">prepareInvalidate</a> ()</td></tr>
<tr class="separator:aa6ae3a64af29b501211145c6c63cddbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde161ecf8390de9df3bc3ee1d0d4558"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#adde161ecf8390de9df3bc3ee1d0d4558">prepareRehabilitate</a> ()</td></tr>
<tr class="separator:adde161ecf8390de9df3bc3ee1d0d4558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8fca05673561eed9a3d51119c3d49e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#abc8fca05673561eed9a3d51119c3d49e">prepareReleasePoChannel</a> ()</td></tr>
<tr class="separator:abc8fca05673561eed9a3d51119c3d49e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a8091521d7f7ae22db014b8cf6565576d"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a8091521d7f7ae22db014b8cf6565576d">operator&lt;&lt;</a> (std::ostream &amp;os, const <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6f6de4731e5e5c4fc7de1c42b5d3eeac">SessionState</a> &amp;ss)</td></tr>
<tr class="separator:a8091521d7f7ae22db014b8cf6565576d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Portable Object Secure Session.</p>
<p>A non-encrypted secure session with a Calypso PO requires the management of two <a class="el" href="../../d7/d71/classkeyple_1_1core_1_1seproxy_1_1message_1_1_proxy_reader.html">keyple::core::seproxy::message::ProxyReader</a> in order to communicate with both a Calypso PO and a SAM</p>
<dl class="section author"><dt>Author</dt><dd>Calypso Networks Association </dd></dl>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a717737da32739bee8fd7bbda80d06ea5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a717737da32739bee8fd7bbda80d06ea5">&#9670;&nbsp;</a></span>PinTransmissionMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a717737da32739bee8fd7bbda80d06ea5">keyple::calypso::transaction::PoTransaction::PinTransmissionMode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a717737da32739bee8fd7bbda80d06ea5">keyple::calypso::transaction::PoTransaction::PinTransmissionMode</a> indicates whether the PIN transmission is encrypted or not. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a717737da32739bee8fd7bbda80d06ea5af62eb0bf5e5c72e80983fbbac1cb70e5"></a>PLAIN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a717737da32739bee8fd7bbda80d06ea5a3fe1c5068682cdee737d379207ab631f"></a>ENCRYPTED&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<a id="a6f6de4731e5e5c4fc7de1c42b5d3eeac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f6de4731e5e5c4fc7de1c42b5d3eeac">&#9670;&nbsp;</a></span>SessionState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6f6de4731e5e5c4fc7de1c42b5d3eeac">keyple::calypso::transaction::PoTransaction::SessionState</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The PO Transaction State defined with the elements: ‘IOError’, ‘SEInserted’ and ‘SERemoval’. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a6f6de4731e5e5c4fc7de1c42b5d3eeaca836d7dc2e7bceeceacd08395975a0fcb"></a>SESSION_UNINITIALIZED&#160;</td><td class="fielddoc"><p>Initial state of a PO transaction. The PO must have been previously selected. </p>
</td></tr>
<tr><td class="fieldname"><a id="a6f6de4731e5e5c4fc7de1c42b5d3eeaca97d7b25f9b3e64e9baf45d587e79aac1"></a>SESSION_OPEN&#160;</td><td class="fielddoc"><p>The secure session is active. </p>
</td></tr>
<tr><td class="fieldname"><a id="a6f6de4731e5e5c4fc7de1c42b5d3eeacaed9cdac35d4b94f56f047226ea83fefd"></a>SESSION_CLOSED&#160;</td><td class="fielddoc"><p>The secure session is closed. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1e9d6d4b967c1748fb7dd5aa83e9a12e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e9d6d4b967c1748fb7dd5aa83e9a12e">&#9670;&nbsp;</a></span>PoTransaction() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">keyple::calypso::transaction::PoTransaction::PoTransaction </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../df/dc7/classkeyple_1_1core_1_1selection_1_1_se_resource.html">SeResource</a>&lt; <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a> &gt;&gt;&#160;</td>
          <td class="paramname"><em>poResource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../dc/d10/classkeyple_1_1calypso_1_1transaction_1_1_po_security_settings.html">PoSecuritySettings</a> &gt;&#160;</td>
          <td class="paramname"><em>poSecuritySettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html">PoTransaction</a> with PO and SAM readers. </p><ul>
<li>
Logical channels with PO &amp; SAM could already be established or not. </li>
<li>
A list of SAM parameters is provided as en EnumMap. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">poResource</td><td>the PO resource (combination of <a class="el" href="../../d0/d52/classkeyple_1_1core_1_1seproxy_1_1_se_reader.html">keyple::core::seproxy::SeReader</a> and <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">keyple::calypso::transaction::CalypsoPo</a>) </td></tr>
    <tr><td class="paramname">poSecuritySettings</td><td>a list of security settings (<a class="el" href="../../dc/d10/classkeyple_1_1calypso_1_1transaction_1_1_po_security_settings.html">keyple::calypso::transaction::PoSecuritySettings</a>) used in </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c4762a05351124bad2f40c09b50b4cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c4762a05351124bad2f40c09b50b4cb">&#9670;&nbsp;</a></span>PoTransaction() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">keyple::calypso::transaction::PoTransaction::PoTransaction </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../df/dc7/classkeyple_1_1core_1_1selection_1_1_se_resource.html">SeResource</a>&lt; <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a> &gt;&gt;&#160;</td>
          <td class="paramname"><em>poResource</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html">PoTransaction</a> with PO reader and without SAM reader. </p><ul>
<li>
Logical channels with PO could already be established or not. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">poResource</td><td>the PO resource (combination of <a class="el" href="../../d0/d52/classkeyple_1_1core_1_1seproxy_1_1_se_reader.html">keyple::core::seproxy::SeReader</a> and <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">keyple::calypso::transaction::CalypsoPo</a>) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aef04923253cf8d4723971e09de836f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef04923253cf8d4723971e09de836f43">&#9670;&nbsp;</a></span>prepareAppendRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareAppendRecord </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>recordData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds an AppendRecord command and add it to the list of commands to be sent with the next process command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>the sfi to select </td></tr>
    <tr><td class="paramname">recordData</td><td>the new record data to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>- if the command is inconsistent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5db542361ff97cbd1e9795477ac885cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5db542361ff97cbd1e9795477ac885cd">&#9670;&nbsp;</a></span>prepareCheckPinStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareCheckPinStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a VerifyPin command without PIN presentation in order to get the attempt counter.<br  />
 The PIN status will made available in <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a> after the execution of process command.<br  />
 Adds it to the list of commands to be sent with the next process command.</p>
<p>See <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html#a8c02e61de16f6ac02976b7b1c7cd7633">CalypsoPo#isPinBlocked</a> and <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html#a2bbe3076b3e96d85e6087e725f1655ec">CalypsoPo#getPinAttemptRemaining</a> methods.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionIllegalStateException</td><td>if the PIN feature is not available for this PO. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8891e08a1077eb617c95f064e741dacc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8891e08a1077eb617c95f064e741dacc">&#9670;&nbsp;</a></span>prepareDecreaseCounter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareDecreaseCounter </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>counterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>decValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a Decrease command and add it to the list of commands to be sent with the next process command </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">counterNumber</td><td>&gt;= 01h: Counters file, number of the counter. 00h: Simulated Counter file. </td></tr>
    <tr><td class="paramname">sfi</td><td>SFI of the file to select or 00h for current EF </td></tr>
    <tr><td class="paramname">decValue</td><td>Value to subtract to the counter (defined as a positive int &lt;= 16777215 [FFFFFFh]) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>- if the decrement value is out of range </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>- if the command is inconsistent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b2fffa33102ff9fd534c276ac2576b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b2fffa33102ff9fd534c276ac2576b7">&#9670;&nbsp;</a></span>prepareIncreaseCounter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareIncreaseCounter </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>counterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>incValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a Increase command and add it to the list of commands to be sent with the next process command </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">counterNumber</td><td>&gt;= 01h: Counters file, number of the counter. 00h: Simulated Counter file. </td></tr>
    <tr><td class="paramname">sfi</td><td>SFI of the file to select or 00h for current EF </td></tr>
    <tr><td class="paramname">incValue</td><td>Value to add to the counter (defined as a positive int &lt;= 16777215 [FFFFFFh]) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>- if the decrement value is out of range </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>- if the command is inconsistent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa6ae3a64af29b501211145c6c63cddbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ae3a64af29b501211145c6c63cddbe">&#9670;&nbsp;</a></span>prepareInvalidate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareInvalidate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare the invalidation of the PO<br  />
 This command is usually executed within a secure session with the SESSION_LVL_DEBIT key (depends on the access rights given to this command in the file structure of the PO).</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionIllegalStateException</td><td>if the PO is already invalidated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d7f11a907a16944ad56da50a195876a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7f11a907a16944ad56da50a195876a">&#9670;&nbsp;</a></span>prepareReadCounterFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareReadCounterFile </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>countersNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a record of the indicated EF, which should be a count file. </p>
<p>The record will be read up to the counter location indicated in parameter.<br  />
 Thus all previous counters will also be read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>the SFI of the EF </td></tr>
    <tr><td class="paramname">countersNumber</td><td>the number of the last counter to be read </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>if one of the provided argument is out of range </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10f9dd5880312d925563ad033803472a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10f9dd5880312d925563ad033803472a">&#9670;&nbsp;</a></span>prepareReadRecordFile() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareReadRecordFile </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>firstRecordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>numberOfRecords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>recordSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read one or more records from the indicated EF</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>the SFI of the EF </td></tr>
    <tr><td class="paramname">firstRecordNumber</td><td>the record number to read (or first record to read in case of several records) </td></tr>
    <tr><td class="paramname">numberOfRecords</td><td>the number of records expected </td></tr>
    <tr><td class="paramname">recordSize</td><td>the record length </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>if one of the provided argument is out of range </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e0861ce123355e703c9f714edaaee95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e0861ce123355e703c9f714edaaee95">&#9670;&nbsp;</a></span>prepareReadRecordFile() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareReadRecordFile </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>recordNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a single record from the indicated EF</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>the SFI of the EF to read </td></tr>
    <tr><td class="paramname">recordNumber</td><td>the record number to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>if one of the provided argument is out of range </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adde161ecf8390de9df3bc3ee1d0d4558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adde161ecf8390de9df3bc3ee1d0d4558">&#9670;&nbsp;</a></span>prepareRehabilitate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareRehabilitate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare the rehabilitation of the PO<br  />
 This command is usually executed within a secure session with the SESSION_LVL_PERSO key (depends on the access rights given to this command in the file structure of the PO).</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionIllegalStateException</td><td>if the PO is not invalidated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc8fca05673561eed9a3d51119c3d49e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8fca05673561eed9a3d51119c3d49e">&#9670;&nbsp;</a></span>prepareReleasePoChannel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareReleasePoChannel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare to close the PO channel.<br  />
 If this command is called before a "process" command (except for processOpening) then the last transmission to the PO will be associated with the indication CLOSE_AFTER in order to close the PO channel.<br  />
 Important: this command must imperatively be called at the end of any transaction, whether it ended normally or not.<br  />
 In case the transaction was interrupted (exception), an additional call to processPoCommands must be made to effectively close the channel.</p>
<p>C++ vs. Java: private in Java </p>

</div>
</div>
<a id="a4c26fe88b9af6da7e1db688f09db2736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c26fe88b9af6da7e1db688f09db2736">&#9670;&nbsp;</a></span>prepareSelectFile() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSelectFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/dc8/namespacekeyple_1_1calypso.html#a9d7e9d8c6fe5880d4788a49af23737d3">SelectFileControl</a>&#160;</td>
          <td class="paramname"><em>control</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare a select file ApduRequest to be executed following the selection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">control</td><td>provides the navigation case: FIRST, NEXT or CURRENT </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a94b0c7896fb8567547bde284d3c2755d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94b0c7896fb8567547bde284d3c2755d">&#9670;&nbsp;</a></span>prepareSelectFile() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSelectFile </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>lid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare a select file ApduRequest to be executed following the selection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lid</td><td>the LID of the EF to select </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aef76466c85d499fd831a36928d4f9a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef76466c85d499fd831a36928d4f9a26">&#9670;&nbsp;</a></span>prepareSvDebit() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSvDebit </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepares an SV debit or Undebit (partially or totally cancels the last SV debit command). </p>
<p>It consists in decreasing the current balance of the SV by a certain amount or canceling a previous debit. <br  />
 The information fields such as date and time are set to 0. The extraInfo field propagated in Logs are automatically generated with the type of transaction and amount. <br  />
 Operations that would result in a negative balance are forbidden (SV Exception raised). <br  />
 Note: the key used is the debit key</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amount</td><td>the amount to be subtracted or added, positive integer in the range 0..32767 when subtracted and 0..32768 when added. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a78892f0f669022b0349d5985322ea603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78892f0f669022b0349d5985322ea603">&#9670;&nbsp;</a></span>prepareSvDebit() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSvDebit </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepares an SV debit or Undebit (partially or totally cancels the last SV debit command). </p>
<p>It consists in decreasing the current balance of the SV by a certain amount or canceling a previous debit. <br  />
 Note: the key used is the debit key</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amount</td><td>the amount to be subtracted or added, positive integer in the range 0..32767 when subtracted and 0..32768 when added. </td></tr>
    <tr><td class="paramname">date</td><td>2-byte free value </td></tr>
    <tr><td class="paramname">time</td><td>2-byte free value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a25441ac9738c349911928674988d344b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25441ac9738c349911928674988d344b">&#9670;&nbsp;</a></span>prepareSvGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSvGet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d97/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_sv_settings.html#a4b466ea8d2d146c42bd9d269b71345ff">SvSettings::Operation</a> &amp;&#160;</td>
          <td class="paramname"><em>svOperation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d97/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_sv_settings.html#a00a9cb0e2eaaf1ea9b088d28ff57cc49">SvSettings::Action</a> &amp;&#160;</td>
          <td class="paramname"><em>svAction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepares an SV operation or simply retrieves the current SV status</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">svOperation</td><td>informs about the nature of the intended operation: debit or reload </td></tr>
    <tr><td class="paramname">svAction</td><td>the type of action: DO a debit or a positive reload, UNDO an undebit or a negative reload </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionIllegalStateException</td><td>if the SV feature is not available for this PO. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9c40230f26d9636e82864ed3007e8b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c40230f26d9636e82864ed3007e8b37">&#9670;&nbsp;</a></span>prepareSvReadAllLogs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSvReadAllLogs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare the reading of all SV log records </p>
<p>The SV transaction logs are contained in two files with fixed identifiers.<br  />
 The file whose SFI is 0x14 contains 1 record containing the unique reload log.<br  />
 The file whose SFI is 0x15 contains 3 records containing the last three debit logs.<br  />
 At the end of this reading operation, the data will be accessible in <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a> in raw format via the standard commands for accessing read files or in the form of dedicated objects (see <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html#a770dc2ba7494c3a4df1bafbd2bd74869">CalypsoPo#getSvLoadLogRecord()</a> and <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html#ad34e052e2441a9e1c396d9d3e33240ac">CalypsoPo#getSvDebitLogAllRecords()</a>) </p>

</div>
</div>
<a id="aa555afc5ceee84ebca2c7652545b3d14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa555afc5ceee84ebca2c7652545b3d14">&#9670;&nbsp;</a></span>prepareSvReload() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSvReload </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepares an SV reload (increasing the current SV balance) </p>
<p>Note: the key used is the reload key</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amount</td><td>the value to be reloaded, positive integer in the range 0..8388607 for a DO action, in the range 0..8388608 for an UNDO action. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionIllegalStateException</td><td>if the SV feature is not available for this PO. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9e9411f5cb63fc80cad538f4e27e315f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e9411f5cb63fc80cad538f4e27e315f">&#9670;&nbsp;</a></span>prepareSvReload() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareSvReload </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>free</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepares an SV reload (increasing the current SV balance) </p>
<p>Note: the key used is the reload key</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amount</td><td>the value to be reloaded, positive or negative integer in the range -8388608..8388607 </td></tr>
    <tr><td class="paramname">date</td><td>2-byte free value </td></tr>
    <tr><td class="paramname">time</td><td>2-byte free value </td></tr>
    <tr><td class="paramname">free</td><td>2-byte free value </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionIllegalStateException</td><td>if the SV feature is not available for this PO. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0d1e9cdd87b7a41650957a34b488e003"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1e9cdd87b7a41650957a34b488e003">&#9670;&nbsp;</a></span>prepareUpdateRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareUpdateRecord </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>recordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>recordData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds an UpdateRecord command and add it to the list of commands to be sent with the next process command </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>the sfi to select </td></tr>
    <tr><td class="paramname">recordNumber</td><td>the record number to update </td></tr>
    <tr><td class="paramname">recordData</td><td>the new record data. If length &lt; RecSize, bytes beyond length are left unchanged. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>- if record number is &lt; 1 </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>- if the request is inconsistent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72a37b1c6995ef57b53a8a572ad5ddfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a37b1c6995ef57b53a8a572ad5ddfe">&#9670;&nbsp;</a></span>prepareWriteRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::prepareWriteRecord </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>recordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>recordData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds an WriteRecord command and add it to the list of commands to be sent with the next process command </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>the sfi to select </td></tr>
    <tr><td class="paramname">recordNumber</td><td>the record number to write </td></tr>
    <tr><td class="paramname">recordData</td><td>the data to overwrite in the record. If length &lt; RecSize, bytes beyond length are left unchanged. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>- if record number is &lt; 1 </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>- if the request is inconsistent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9a95e09fcf0de5797c9e9b2a82802aea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a95e09fcf0de5797c9e9b2a82802aea">&#9670;&nbsp;</a></span>processCancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::processCancel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Abort a Secure Session. </p>
<p>Send the appropriate command to the PO </p>
<p>Clean up internal data and status.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionException</td><td>if a functional error occurs (including PO and SAM IO errors) </td></tr>
    <tr><td class="paramname">CalypsoPoCommandException</td><td>if a response from the PO was unexpected </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a624987a136bfc437f5ab139066783faa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a624987a136bfc437f5ab139066783faa">&#9670;&nbsp;</a></span>processClosing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::processClosing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends the currently prepared commands list (may be empty) and closes the Secure Session. </p><ul>
<li>
The ratification is handled according to the communication mode. </li>
<li>
The logical channel can be left open or closed. </li>
<li>
The result of the commands is placed in <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a>. </li>
</ul>
<p>The communication mode is retrieved from CalypsoPO to manage the ratification process. If the communication mode is CONTACTLESS, a ratification command will be generated and sent to the PO after the Close Session command; the ratification will not be requested in the Close Session command. On the contrary, if the communication mode is CONTACTS, no ratification command will be sent to the PO and ratification will be requested in the Close Session command</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionException</td><td>if a functional error occurs (including PO and SAM IO errors) </td></tr>
    <tr><td class="paramname">CalypsoPoCommandException</td><td>if a response from the PO was unexpected </td></tr>
    <tr><td class="paramname">CalypsoSamCommandException</td><td>if a response from the SAM was unexpected </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a39eece6d2aa65793029701a0c9d773d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39eece6d2aa65793029701a0c9d773d8">&#9670;&nbsp;</a></span>processOpening()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::processOpening </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/dc2/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction_1_1_session_setting_1_1_access_level.html">SessionSetting::AccessLevel</a> &amp;&#160;</td>
          <td class="paramname"><em>accessLevel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a Secure Session. </p><ul>
<li>
The PO must have been previously selected, so a logical channel with the PO application must be already active. </li>
<li>
The PO serial &amp; revision are identified from FCI data. </li>
<li>
A first request is sent to the SAM session reader. <ul>
<li>
In case not logical channel is active with the SAM, a channel is open. </li>
<li>
Then a Select Diversifier (with the PO serial) &amp; a Get Challenge are automatically operated. The SAM challenge is recovered. </li>
</ul>
</li>
<li>
The PO Open Session command is built according to the PO revision, the SAM challenge, the keyIndex, and openingSfiToSelect / openingRecordNumberToRead. </li>
<li>
Next the PO reader is requested: <ul>
<li>
for the currently selected PO, with channelControl set to KEEP_OPEN, </li>
<li>
and some PO Apdu Requests including at least the Open Session command and all prepared PO command to operate inside the session. </li>
</ul>
</li>
<li>
The session PO keyset reference is identified from the PO Open Session response, the PO challenge is recovered too. </li>
<li>
According to the PO responses of Open Session and the PO commands sent inside the session, a "cache" of SAM commands is filled with the corresponding Digest Init &amp; Digest Update commands. </li>
<li>
The result of the commands is placed in <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a>. </li>
<li>
Any call to prepareReleasePoChannel before this command will be ignored but will remain active for the next process command. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accessLevel</td><td>access level of the session (personalization, load or debit). </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionException</td><td>if a functional error occurs (including PO and SAM IO errors) </td></tr>
    <tr><td class="paramname">CalypsoPoCommandException</td><td>if a response from the PO was unexpected </td></tr>
    <tr><td class="paramname">CalypsoSamCommandException</td><td>if a response from the SAM was unexpected </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aee03855668a2d540277680a957da0ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee03855668a2d540277680a957da0ca8">&#9670;&nbsp;</a></span>processPoCommands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::processPoCommands </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process all prepared PO commands outside or in a Secure Session. </p><ul>
<li>
In case the secure session is active, the "cache" of SAM commands is completed with the corresponding Digest Update commands. Also, the PO channel is kept open. </li>
<li>
Outside of a secure session, the PO channel is closed depending on whether or not prepareReleasePoChannel has been called. </li>
<li>
The result of the commands is placed in <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html">CalypsoPo</a>. </li>
</ul>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionException</td><td>if a functional error occurs (including PO and SAM IO errors) </td></tr>
    <tr><td class="paramname">CalypsoPoCommandException</td><td>if a response from the PO was unexpected </td></tr>
    <tr><td class="paramname">CalypsoSamCommandException</td><td>if a response from the SAM was unexpected </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa92e74a7689fcf603a484bee464a2eb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa92e74a7689fcf603a484bee464a2eb7">&#9670;&nbsp;</a></span>processVerifyPin() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::processVerifyPin </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ProcessVerifyPin variant with the PIN supplied as an ASCII string.<br  />
 E.g. "1234" will be transmited as { 0x31,032,0x33,0x34 }</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>an ASCII string (4-character long) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a70eb927ee2da9b9d0a3e1040cb8f9e5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70eb927ee2da9b9d0a3e1040cb8f9e5f">&#9670;&nbsp;</a></span>processVerifyPin() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyple::calypso::transaction::PoTransaction::processVerifyPin </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Performs a PIN verification, in order to authenticate the cardholder and/or unlock access to certain PO files.<br  />
 This command can be performed both in and out of a secure session.<br  />
 The PIN code can be transmitted in plain text or encrypted according to the parameter set in <a class="el" href="../../dc/d10/classkeyple_1_1calypso_1_1transaction_1_1_po_security_settings.html">PoSecuritySettings</a> (by default the transmission is encrypted).<br  />
 If the execution is done out of session but an encrypted transmission is requested, then <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html">PoTransaction</a> must be constructed with <a class="el" href="../../dc/d10/classkeyple_1_1calypso_1_1transaction_1_1_po_security_settings.html">PoSecuritySettings</a><br  />
 If <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html">PoTransaction</a> is constructed without <a class="el" href="../../dc/d10/classkeyple_1_1calypso_1_1transaction_1_1_po_security_settings.html">PoSecuritySettings</a> the transmission in done in plain.<br  />
 The PO channel is closed if prepareReleasePoChannel is called before this command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>the PIN code value (4-byte long byte array) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CalypsoPoTransactionException</td><td>if a functional error occurs (including PO and SAM IO errors) </td></tr>
    <tr><td class="paramname">CalypsoPoCommandException</td><td>if a response from the PO was unexpected </td></tr>
    <tr><td class="paramname">CalypsoPoPinException</td><td>if the PIN presentation failed (the remaining attempt counter is update in Calypso). See <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html#a8c02e61de16f6ac02976b7b1c7cd7633">CalypsoPo#isPinBlocked</a> and <a class="el" href="../../da/d2c/classkeyple_1_1calypso_1_1transaction_1_1_calypso_po.html#a2bbe3076b3e96d85e6087e725f1655ec">CalypsoPo#getPinAttemptRemaining</a> methods </td></tr>
    <tr><td class="paramname">CalypsoPoTransactionIllegalStateException</td><td>if the PIN feature is not available for this PO or if commands have been prepared before calling this process method. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a8091521d7f7ae22db014b8cf6565576d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8091521d7f7ae22db014b8cf6565576d">&#9670;&nbsp;</a></span>operator&lt;&lt;</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/dcd/classkeyple_1_1calypso_1_1transaction_1_1_po_transaction.html#a6f6de4731e5e5c4fc7de1c42b5d3eeac">SessionState</a> &amp;&#160;</td>
          <td class="paramname"><em>ss</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>component/keyple-calypso/src/main/transaction/<a class="el" href="../../d4/d04/_po_transaction_8h.html">PoTransaction.h</a></li>
<li>component/keyple-calypso/src/main/transaction/<a class="el" href="../../da/d4b/_po_transaction_8cpp.html">PoTransaction.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
