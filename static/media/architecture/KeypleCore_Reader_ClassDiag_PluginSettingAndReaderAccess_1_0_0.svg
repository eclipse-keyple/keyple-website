<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1878px" preserveAspectRatio="none" style="width:2300px;height:1878px;" version="1.1" viewBox="0 0 2300 1878" width="2300px" zoomAndPan="magnify"><defs/><g><!--MD5=[c3c915b379c717332e210d38dcd6e8a2]
cluster org.eclipse.keyple.core--><polygon fill="#FFFFFF" points="44,48,386,48,400,95.2188,2256,95.2188,2256,1854,44,1854,44,48" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="44" x2="400" y1="95.2188" y2="95.2188"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="330" x="52" y="81.0664">org.eclipse.keyple.core</text><!--MD5=[7579d5565d2521d5936cec86ed3dadee]
cluster service--><polygon fill="#FFFFFF" points="92,136,210,136,224,183.2188,2208,183.2188,2208,1806,92,1806,92,136" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="92" x2="224" y1="183.2188" y2="183.2188"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="100" y="169.0664">service</text><!--MD5=[2e31800f208179cab94650aeb782e4d8]
cluster event--><polygon fill="#FFFFFF" points="686,1198,780,1198,794,1245.2188,2160,1245.2188,2160,1758,686,1758,686,1198" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="686" x2="794" y1="1245.2188" y2="1245.2188"/><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="694" y="1231.0664">event</text><!--MD5=[5c68026ea752d2e8f1e184b2d7c89ced]
class PluginFactory--><rect fill="#FEFECE" height="151.3438" id="PluginFactory" style="stroke: #D4AC0D; stroke-width: 3.0;" width="298" x="551" y="340"/><ellipse cx="608.9" cy="372" fill="#B4A7E5" rx="22" ry="22" style="stroke: #B4A7E5; stroke-width: 2.0;"/><path d="M610.9,366 L610.9,378 L614.9,378 L615.8688,378 L616.9,379.25 L616.9,380 L616.9,380.75 L615.8688,382 L614.9,382 L602.9,382 L601.9313,382 L600.9,380.75 L600.9,380 L600.9,379.25 L601.9313,378 L602.9,378 L606.9,378 L606.9,366 L602.9,366 L601.9313,366 L600.9,364.75 L600.9,364 L600.9,363.25 L601.9313,362 L602.9,362 L614.9,362 L615.8688,362 L616.9,363.25 L616.9,364 L616.9,364.75 L615.8688,366 L614.9,366 L610.9,366 Z "/><ellipse cx="653.1" cy="371" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="150" x="665.1" y="381.8203">PluginFactory</text><line style="stroke: #D4AC0D; stroke-width: 3.0;" x1="553" x2="847" y1="404" y2="404"/><line style="stroke: #D4AC0D; stroke-width: 3.0;" x1="553" x2="847" y1="420" y2="420"/><ellipse cx="573" cy="442" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="218" x="591" y="450.8379">String getPluginName()</text><ellipse cx="573" cy="469.6719" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="246" x="591" y="478.5098">Plugin getPluginInstance()</text><!--MD5=[bc3f57c567736ad71a70f1388d085699]
class SmartCardService--><rect fill="#FEFECE" height="416.7656" id="SmartCardService" style="stroke: #D4AC0D; stroke-width: 3.0;" width="526" x="999" y="208"/><ellipse cx="1115.5" cy="248.1875" fill="#ADD1B2" rx="22" ry="22" style="stroke: #ADD1B2; stroke-width: 2.0;"/><path d="M1119.5,241.1875 Q1119.9063,240.1875 1120.375,239.6875 Q1120.8438,239.1875 1121.375,239.1875 Q1122.3125,239.1875 1122.9063,239.75 Q1123.5,240.3125 1123.5,241.625 L1123.5,244.75 Q1123.5,246.0625 1122.9375,246.625 Q1122.375,247.1875 1121.5,247.1875 Q1120.7188,247.1875 1120.2188,246.8438 Q1119.7188,246.5 1119.5,245.5938 Q1119.4063,244.9688 1119.0625,244.625 Q1118.4375,243.9688 1117.3125,243.5938 Q1116.1875,243.1875 1115.0625,243.1875 Q1113.6563,243.1875 1112.4688,243.75 Q1111.3125,244.3125 1110.4063,245.5625 Q1109.5,246.8125 1109.5,248.5313 L1109.5,250.375 Q1109.5,252.4375 1111.1875,253.8125 Q1112.875,255.1875 1115.875,255.1875 Q1117.6563,255.1875 1118.9063,254.7813 Q1119.625,254.5625 1120.4375,253.8438 Q1120.9688,253.4375 1121.25,253.3125 Q1121.5313,253.1875 1121.875,253.1875 Q1122.5313,253.1875 1123,253.7188 Q1123.5,254.2188 1123.5,254.9375 Q1123.5,255.625 1122.8125,256.4375 Q1121.8125,257.625 1120.2188,258.2813 Q1118.125,259.1875 1115.5625,259.1875 Q1112.5625,259.1875 1110.1563,258 Q1108.2188,257.0625 1106.8438,255.0313 Q1105.5,253 1105.5,250.5938 L1105.5,248.4063 Q1105.5,245.9063 1106.6875,243.7188 Q1107.9063,241.5313 1110,240.375 Q1112.125,239.1875 1114.5,239.1875 Q1115.9375,239.1875 1117.1875,239.6875 Q1118.4375,240.1875 1119.5,241.1875 Z "/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="132" x="1228.5" y="242.9141">«Singleton»</text><ellipse cx="1166.5" cy="262.2813" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="1178.5" y="273.1016">final</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="200" x="1232.5" y="273.1016">SmartCardService</text><line style="stroke: #D4AC0D; stroke-width: 3.0;" x1="1001" x2="1523" y1="288.375" y2="288.375"/><rect fill="none" height="12" style="stroke: #C82930; stroke-width: 2.0;" width="12" x="1015" y="304.375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="46" x="1039" y="319.2129">final</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="328" x="1091" y="319.2129">SmartCardService uniqueInstance</text><rect fill="none" height="12" style="stroke: #C82930; stroke-width: 2.0;" width="12" x="1015" y="332.0469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1039" y="346.8848">final</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="370" x="1091" y="346.8848">ConcurrentMap&lt;String, Plugin&gt; plugins</text><line style="stroke: #D4AC0D; stroke-width: 3.0;" x1="1001" x2="1523" y1="359.7188" y2="359.7188"/><ellipse cx="1021" cy="381.7188" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="310" x="1039" y="390.5566">SmartCardService getInstance()</text><ellipse cx="1021" cy="409.3906" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="184" x="1039" y="418.2285">String getVersion()</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1045" y="445.9004"/><ellipse cx="1021" cy="464.7344" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="474" x="1039" y="473.5723">Plugin registerPlugin(PluginFactory pluginFactory)</text><ellipse cx="1021" cy="492.4063" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="390" x="1039" y="501.2441">boolean isRegistered(String pluginName)</text><ellipse cx="1021" cy="520.0781" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="424" x="1039" y="528.916">boolean unregisterPlugin(String pluginName)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1045" y="556.5879"/><ellipse cx="1021" cy="575.4219" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="278" x="1039" y="584.2598">Plugin getPlugin(String name)</text><ellipse cx="1021" cy="603.0938" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="308" x="1039" y="611.9316">Map&lt;String, Plugin&gt; getPlugins()</text><!--MD5=[b628511dd50102041730ee0512f882c8]
class Plugin--><rect fill="#F0FFFF" height="234.3594" id="Plugin" style="stroke: #0000FF; stroke-width: 3.0;" width="388" x="788" y="808"/><ellipse cx="927.5" cy="840" fill="#B4A7E5" rx="22" ry="22" style="stroke: #B4A7E5; stroke-width: 2.0;"/><path d="M929.5,834 L929.5,846 L933.5,846 L934.4688,846 L935.5,847.25 L935.5,848 L935.5,848.75 L934.4688,850 L933.5,850 L921.5,850 L920.5313,850 L919.5,848.75 L919.5,848 L919.5,847.25 L920.5313,846 L921.5,846 L925.5,846 L925.5,834 L921.5,834 L920.5313,834 L919.5,832.75 L919.5,832 L919.5,831.25 L920.5313,830 L921.5,830 L933.5,830 L934.4688,830 L935.5,831.25 L935.5,832 L935.5,832.75 L934.4688,834 L933.5,834 L929.5,834 Z "/><ellipse cx="978.5" cy="839" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="990.5" y="849.8203">Plugin</text><line style="stroke: #0000FF; stroke-width: 3.0;" x1="790" x2="1174" y1="872" y2="872"/><line style="stroke: #0000FF; stroke-width: 3.0;" x1="790" x2="1174" y1="888" y2="888"/><ellipse cx="810" cy="910" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="162" x="828" y="918.8379">String getName()</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="834" y="946.5098"/><ellipse cx="810" cy="965.3438" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="336" x="828" y="974.1816">Map&lt;String, Reader&gt; getReaders()</text><ellipse cx="810" cy="993.0156" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="300" x="828" y="1001.8535">Set&lt;String&gt; getReaderNames()</text><ellipse cx="810" cy="1020.6875" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="306" x="828" y="1029.5254">Reader getReader(String name)</text><!--MD5=[e86a4777f2c0372cf9fb3cd047e1466e]
class Reader--><rect fill="#EEFFEE" height="289.7031" id="Reader" style="stroke: #008000; stroke-width: 3.0;" width="720" x="1348" y="780"/><ellipse cx="1647.5" cy="812" fill="#B4A7E5" rx="22" ry="22" style="stroke: #B4A7E5; stroke-width: 2.0;"/><path d="M1649.5,806 L1649.5,818 L1653.5,818 L1654.4688,818 L1655.5,819.25 L1655.5,820 L1655.5,820.75 L1654.4688,822 L1653.5,822 L1641.5,822 L1640.5313,822 L1639.5,820.75 L1639.5,820 L1639.5,819.25 L1640.5313,818 L1641.5,818 L1645.5,818 L1645.5,806 L1641.5,806 L1640.5313,806 L1639.5,804.75 L1639.5,804 L1639.5,803.25 L1640.5313,802 L1641.5,802 L1653.5,802 L1654.4688,802 L1655.5,803.25 L1655.5,804 L1655.5,804.75 L1654.4688,806 L1653.5,806 L1649.5,806 Z "/><ellipse cx="1698.5" cy="811" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="82" x="1710.5" y="821.8203">Reader</text><line style="stroke: #008000; stroke-width: 3.0;" x1="1350" x2="2066" y1="844" y2="844"/><line style="stroke: #008000; stroke-width: 3.0;" x1="1350" x2="2066" y1="860" y2="860"/><ellipse cx="1370" cy="882" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="162" x="1388" y="890.8379">String getName()</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1394" y="918.5098"/><ellipse cx="1370" cy="937.3438" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="234" x="1388" y="946.1816">boolean isCardPresent()</text><ellipse cx="1370" cy="965.0156" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="228" x="1388" y="973.8535">boolean isContactless()</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1394" y="1001.5254"/><ellipse cx="1370" cy="1020.3594" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="668" x="1388" y="1029.1973">activateProtocol(String applicationReference, String pluginReference)</text><ellipse cx="1370" cy="1048.0313" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="460" x="1388" y="1056.8691">deactivateProtocol(String applicationReference)</text><!--MD5=[c8cbac6d6d9e600bce6d5400427f5af6]
class PoolPlugin--><rect fill="#F0FFFF" height="179.0156" id="PoolPlugin" style="stroke: #0000FF; stroke-width: 3.0;" width="524" x="124" y="1408"/><ellipse cx="306.5" cy="1440" fill="#B4A7E5" rx="22" ry="22" style="stroke: #B4A7E5; stroke-width: 2.0;"/><path d="M308.5,1434 L308.5,1446 L312.5,1446 L313.4688,1446 L314.5,1447.25 L314.5,1448 L314.5,1448.75 L313.4688,1450 L312.5,1450 L300.5,1450 L299.5313,1450 L298.5,1448.75 L298.5,1448 L298.5,1447.25 L299.5313,1446 L300.5,1446 L304.5,1446 L304.5,1434 L300.5,1434 L299.5313,1434 L298.5,1432.75 L298.5,1432 L298.5,1431.25 L299.5313,1430 L300.5,1430 L312.5,1430 L313.4688,1430 L314.5,1431.25 L314.5,1432 L314.5,1432.75 L313.4688,1434 L312.5,1434 L308.5,1434 Z "/><ellipse cx="357.5" cy="1439" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="120" x="369.5" y="1449.8203">PoolPlugin</text><line style="stroke: #0000FF; stroke-width: 3.0;" x1="126" x2="646" y1="1472" y2="1472"/><line style="stroke: #0000FF; stroke-width: 3.0;" x1="126" x2="646" y1="1488" y2="1488"/><ellipse cx="146" cy="1510" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="472" x="164" y="1518.8379">SortedSet&lt;String&gt; getReaderGroupReferences()</text><ellipse cx="146" cy="1537.6719" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="456" x="164" y="1546.5098">Reader allocateReader(String groupReference)</text><ellipse cx="146" cy="1565.3438" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="298" x="164" y="1574.1816">releaseReader(Reader reader)</text><!--MD5=[1fa9a61019755e60a0cb03f0bc3590aa]
class ObservablePlugin--><rect fill="#F0FFFF" height="206.6875" id="ObservablePlugin" style="stroke: #0000FF; stroke-width: 3.0;" width="526" x="719" y="1395"/><ellipse cx="862.5" cy="1427" fill="#B4A7E5" rx="22" ry="22" style="stroke: #B4A7E5; stroke-width: 2.0;"/><path d="M864.5,1421 L864.5,1433 L868.5,1433 L869.4688,1433 L870.5,1434.25 L870.5,1435 L870.5,1435.75 L869.4688,1437 L868.5,1437 L856.5,1437 L855.5313,1437 L854.5,1435.75 L854.5,1435 L854.5,1434.25 L855.5313,1433 L856.5,1433 L860.5,1433 L860.5,1421 L856.5,1421 L855.5313,1421 L854.5,1419.75 L854.5,1419 L854.5,1418.25 L855.5313,1417 L856.5,1417 L868.5,1417 L869.4688,1417 L870.5,1418.25 L870.5,1419 L870.5,1419.75 L869.4688,1421 L868.5,1421 L864.5,1421 Z "/><ellipse cx="913.5" cy="1426" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="200" x="925.5" y="1436.8203">ObservablePlugin</text><line style="stroke: #0000FF; stroke-width: 3.0;" x1="721" x2="1243" y1="1459" y2="1459"/><line style="stroke: #0000FF; stroke-width: 3.0;" x1="721" x2="1243" y1="1475" y2="1475"/><ellipse cx="741" cy="1497" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="136" x="759" y="1505.8379">addObserver(</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="895" y="1505.8379">final</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="250" x="947" y="1505.8379">PluginObserver observer)</text><ellipse cx="741" cy="1524.6719" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="172" x="759" y="1533.5098">removeObserver(</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="931" y="1533.5098">final</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="250" x="983" y="1533.5098">PluginObserver observer)</text><ellipse cx="741" cy="1552.3438" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="168" x="759" y="1561.1816">clearObservers()</text><ellipse cx="741" cy="1580.0156" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="202" x="759" y="1588.8535">int countObservers()</text><!--MD5=[e2341a3d5316e117132fc49473ae3219]
class ObservableReader--><rect fill="#EEFFEE" height="455.7344" id="ObservableReader" style="stroke: #008000; stroke-width: 3.0;" width="812" x="1316" y="1270"/><ellipse cx="1596.5" cy="1302" fill="#B4A7E5" rx="22" ry="22" style="stroke: #B4A7E5; stroke-width: 2.0;"/><path d="M1598.5,1296 L1598.5,1308 L1602.5,1308 L1603.4688,1308 L1604.5,1309.25 L1604.5,1310 L1604.5,1310.75 L1603.4688,1312 L1602.5,1312 L1590.5,1312 L1589.5313,1312 L1588.5,1310.75 L1588.5,1310 L1588.5,1309.25 L1589.5313,1308 L1590.5,1308 L1594.5,1308 L1594.5,1296 L1590.5,1296 L1589.5313,1296 L1588.5,1294.75 L1588.5,1294 L1588.5,1293.25 L1589.5313,1292 L1590.5,1292 L1602.5,1292 L1603.4688,1292 L1604.5,1293.25 L1604.5,1294 L1604.5,1294.75 L1603.4688,1296 L1602.5,1296 L1598.5,1296 Z "/><ellipse cx="1647.5" cy="1301" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="212" x="1659.5" y="1311.8203">ObservableReader</text><line style="stroke: #008000; stroke-width: 3.0;" x1="1318" x2="2126" y1="1334" y2="1334"/><line style="stroke: #008000; stroke-width: 3.0;" x1="1318" x2="2126" y1="1350" y2="1350"/><ellipse cx="1338" cy="1372" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="136" x="1356" y="1380.8379">addObserver(</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1492" y="1380.8379">final</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="264" x="1544" y="1380.8379">ReaderObserver observer)</text><ellipse cx="1338" cy="1399.6719" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="172" x="1356" y="1408.5098">removeObserver(</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1528" y="1408.5098">final</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="264" x="1580" y="1408.5098">ReaderObserver observer)</text><ellipse cx="1338" cy="1427.3438" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="168" x="1356" y="1436.1816">clearObservers()</text><ellipse cx="1338" cy="1455.0156" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="202" x="1356" y="1463.8535">int countObservers()</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1362" y="1491.5254"/><ellipse cx="1338" cy="1510.3594" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="538" x="1356" y="1519.1973">setDefaultSelections(AbstractDefaultSelectionsRequest</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="416" x="1356" y="1546.8691">selectionsR, NotificationMode notificationM)</text><ellipse cx="1338" cy="1565.7031" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="760" x="1356" y="1574.541">setDefaultSelectionsAndStartCardDetection(AbstractDefaultSelectionsRequest</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="622" x="1356" y="1602.2129">selectionsR, NotificationMode notificationM, PollingMode pollingM)</text><ellipse cx="1338" cy="1621.0469" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="426" x="1356" y="1629.8848">startCardDetection(PollingMode pollingMode)</text><ellipse cx="1338" cy="1648.7188" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="194" x="1356" y="1657.5566">stopCardDetection()</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1362" y="1685.2285"/><ellipse cx="1338" cy="1704.0625" fill="#84BE84" rx="6" ry="6" style="stroke: #038048; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="238" x="1356" y="1712.9004">finalizeCardProcessing()</text><!--MD5=[230717490673261be3b1e9de94e2929c]
link SmartCardService to Plugin--><path d="M1136.0729,645.122 C1136.0729,645.122 1082.212,742.262 1058.574,784.892 " fill="none" id="SmartCardService-Plugin" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1045.782,807.966,1061.507,796.1032,1050.6312,799.2204,1047.514,788.3446,1045.782,807.966" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1050.6312" x2="1058.389" y1="799.2204" y2="785.227"/><polygon fill="#A80036" points="1147.71,624.132,1134.8948,630.748,1136.0729,645.122,1148.8881,638.506,1147.71,624.132" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="82" x="1114" y="712.9902">plugins</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="14" x="1124.8028" y="667.5796">1</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="10" x="1043.3134" y="785.9333">*</text><!--MD5=[8b513e08943f8bfe5c241563ffc49ec0]
link Plugin to Reader--><path d="M1200.554,925 C1200.554,925 1280.59,925 1320.95,925 " fill="none" id="Plugin-Reader" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1347.51,925,1329.51,917,1337.51,925,1329.51,933,1347.51,925" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1337.51" x2="1321.51" y1="925" y2="925"/><polygon fill="#A80036" points="1176.554,925,1188.554,933,1200.554,925,1188.554,917,1176.554,925" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="86" x="1219" y="911.9902">readers</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="14" x="1191.9855" y="918.7784">1</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="10" x="1322.0909" y="919.3363">*</text><!--MD5=[2219806bdc996f946b60beec9aa5725f]
reverse link Plugin to PoolPlugin--><path d="M811.806,1068.688 C769.964,1104.86 725.776,1144.22 686,1182 C608.646,1255.47 525.15,1343.654 465.934,1407.838 " fill="none" id="Plugin&lt;-PoolPlugin" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="none" points="803.022,1057.778,842.494,1042.358,821.254,1079.028,803.022,1057.778" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="92" x="742" y="1158.9902">extends</text><!--MD5=[550a12816f88094ca7e979a72eedae9c]
reverse link Plugin to ObservablePlugin--><path d="M982,1082.208 C982,1181.566 982,1307.648 982,1394.376 " fill="none" id="Plugin&lt;-ObservablePlugin" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="none" points="968,1082.146,982,1042.146,996,1082.146,968,1082.146" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="92" x="984" y="1158.9902">extends</text><!--MD5=[495ccb80ac82bdc45a1b0288016f2c00]
reverse link Reader to ObservableReader--><path d="M1712.526,1110.934 C1713.772,1161.616 1715.14,1217.188 1716.438,1269.954 " fill="none" id="Reader&lt;-ObservableReader" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="none" points="1698.522,1110.916,1711.532,1070.582,1726.512,1110.226,1698.522,1110.916" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="92" x="1714" y="1158.9902">extends</text><!--MD5=[d842569d2f438607af8ed0fb4cdffa11]
link PluginFactory to SmartCardService--><path d="M849.13,416 C895.144,416 947.258,416 998.588,416 " fill="none" id="PluginFactory-SmartCardService" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="50" x="886" y="402.9902">sets</text><polygon fill="#000000" points="942,389.3516,954,395.3516,942,401.3516,942,389.3516" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="10" x="865.0247" y="409.4103">*</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="14" x="968.9548" y="410.0634">1</text><!--MD5=[a4001258c8db405fbf0ed58a92e714fd]
link PluginFactory to Plugin--><path d="M741.61,492.514 C786.582,573.048 859,702.732 912.612,798.74 " fill="none" id="PluginFactory-&gt;Plugin" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="917.74,807.924,915.9465,788.3081,912.8635,799.1936,901.9779,796.1106,917.74,807.924" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="86" x="868" y="712.9902">creates</text><polygon fill="#000000" points="902,730.7031,908,742.7031,914,730.7031,902,730.7031" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="14" x="733.126" y="534.357">1</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="14" x="894.6098" y="785.8859">1</text><!--MD5=[fb5e71467ab05a4b35dfff9239945efd]
@startuml
skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
skinparam shadowing false

skinparam StateBorderColor #D4AC0D
skinparam ActivityBorderColor #D4AC0D

skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
skinparam ClassBackgroundColor<<green>> #EAFAF1
skinparam ClassBorderColor<<green>> #2ECC71
hide <<green>> stereotype

skinparam ClassBackgroundColor<<orange>> #FDF2E9
skinparam ClassBorderColor<<orange>> #E67E22
hide <<orange>> stereotype

skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

package org.eclipse.keyple.core #FFFFFF {
  package service #FFFFFF {
+interface PluginFactory {
  +String getPluginName()
  +Plugin getPluginInstance()
}
+class "<b>final</b> SmartCardService" as SmartCardService << Singleton >> {
  -<b>final</b> {static}SmartCardService uniqueInstance
  -<b>final</b> ConcurrentMap<String, Plugin> plugins
  +{static}SmartCardService getInstance()
  +String getVersion()

  +Plugin registerPlugin(PluginFactory pluginFactory)
  +boolean isRegistered(String pluginName)
  +boolean unregisterPlugin(String pluginName)

  +Plugin getPlugin(String name)
  +Map<String, Plugin> getPlugins()
}
+interface Plugin {
  +String getName()

  +Map<String, Reader> getReaders()
  +Set<String> getReaderNames()
  +Reader getReader(String name)
}
+interface Reader {
  +String getName()

  +boolean isCardPresent()
  +boolean isContactless()

  +activateProtocol(String applicationReference, String pluginReference)
  +deactivateProtocol(String applicationReference)
}

    SmartCardService "1" *-down-> "*" Plugin : plugins
    Plugin "1" *-right-> "*" Reader : readers

+interface PoolPlugin {
  +SortedSet<String> getReaderGroupReferences()
  +Reader allocateReader(String groupReference)
  +releaseReader(Reader reader)
}
    Plugin <|- - PoolPlugin : extends

    package event #FFFFFF {
+interface ObservablePlugin {
  +addObserver(<b>final</b> PluginObserver observer)
  +removeObserver(<b>final</b> PluginObserver observer)
  +clearObservers()
  +int countObservers()
}
+interface ObservableReader {
  +addObserver(<b>final</b> ReaderObserver observer)
  +removeObserver(<b>final</b> ReaderObserver observer)
  +clearObservers()
  +int countObservers()

  +setDefaultSelections(AbstractDefaultSelectionsRequest
    selectionsR, NotificationMode notificationM)
  +setDefaultSelectionsAndStartCardDetection(AbstractDefaultSelectionsRequest
    selectionsR, NotificationMode notificationM, PollingMode pollingM)
  +startCardDetection(PollingMode pollingMode)
  +stopCardDetection()

  +finalizeCardProcessing()
}
    }
    Plugin <|- - ObservablePlugin : extends
    Reader <|- - ObservableReader : extends
  }

  PluginFactory "*" -right- "1" SmartCardService : sets >
  PluginFactory "1" - -> "1" Plugin : creates >
}

interface Plugin <<Plugin>>
interface ObservablePlugin <<Plugin>>
interface PoolPlugin <<Plugin>>
hide <<Plugin>> stereotype

interface Reader <<Reader>>
interface ObservableReader <<Reader>>
hide <<Reader>> stereotype

skinparam class {
  BackgroundColor<<Plugin>> Azure
  BorderColor<<Plugin>> Blue
  BackgroundColor<<Reader>> #EEFFEE
  BorderColor<<Reader>> Green
}
@enduml

PlantUML version 1.2020.09(Sun May 10 14:51:06 MUT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.64
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>